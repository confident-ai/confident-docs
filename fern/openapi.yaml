openapi: 3.1.0
info:
  title: Confident AI Metrics API
  version: 1.0.0

servers:
  - x-fern-server-name: Confident AI
    url: https://api.confident-ai.com/

tags:
  - name: Metric Collections
    description: Metric Collection API
    externalDocs:
      description: Learn about metric collection
  - name: Metrics
    description: Metrics API
    externalDocs:
      description: Learn about metrics
  - name: Datasets
    description: Confident AI Datasets API
    externalDocs:
      description: Learn about datasets
  - name: Evaluation
    description: Run your evals using API
    externalDocs:
      description: Learn about evaluations
  - name: Tracing
    description: Run your evals using API
    externalDocs:
      description: Learn about tracing
  - name: Threads
    description: Threads API
    externalDocs:
      description: Learn about threads
  - name: Prompt
    description: Run your evals using API
    externalDocs:
      description: Learn about prompts
  - name: Annotations
    description: Annotations API
    externalDocs:
      description: Learn about annotations
  - name: Annotation Queues
    description: Annotation Queues API
    externalDocs:
      description: Learn about annotation queues
  - name: Projects
    description: Projects API
    externalDocs:
      description: Learn about projects

paths:
  /v1/metrics:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Metrics
      summary: List Metrics
      operationId: getCustomMetric
      description: Retrieves all the metrics from your Confident AI project.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetMetricResponse"
              example:
                success: true
                data:
                  metrics:
                    - id: "METRIC-ID-1"
                      name: Correctness
                      criteria: Determine if the `actual output` is correct based on the `input`.
                      evaluationParams:
                        - input
                        - actualOutput
                      multiTurn: false
                    - id: "METRIC-ID-2"
                      name: Relevancy
                      criteria: Determine if the assistant answers are relevant to what the user is asking.
                      multiTurn: true
                deprecated: false
    post:
      x-fern-server-name: Confident AI
      tags:
        - Metrics
      summary: Create Metrics
      operationId: createCustomMetric
      description: Creates a new metric on your Confident AI project.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMetric"
            examples:
              Single-Turn:
                name: Correctness
                criteria: Determine if the `actual output` is correct based on the `expected output`.
                evaluationParams:
                  - actualOutput
                  - expectedOutput
                multiTurn: false
              Multi-Turn:
                name: Relevancy
                criteria: Determine if the assistant answers are relevant to what the user is asking.
                multiTurn: true
              With-Rubric:
                name: Accuracy
                criteria: Determine if the `actual output` is correct based on the `expected output`.
                evaluationParams:
                  - actualOutput
                  - expectedOutput
                multiTurn: false
                rubric:
                  - scoreRange:
                      - 0
                      - 2
                    expectedOutcome: "Factually incorrect."
                  - scoreRange:
                      - 10
                      - 10
                    expectedOutcome: "100% correct."
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateMetricResponse"
              examples:
                Single-Turn:
                  success: true
                  data:
                    id: METRIC-ID
                  deprecated: false
                Multi-Turn:
                  success: true
                  data:
                    id: METRIC-ID
                  deprecated: false
                With-Rubric:
                  success: true
                  data:
                    id: METRIC-ID
                  deprecated: false

  /v1/metrics/{id}:
    put:
      x-fern-server-name: Confident AI
      tags:
        - Metrics
      summary: Update Metrics
      operationId: updateCustomMetric
      description: Updates a custom metric on your Confident AI project.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMetric"
            example:
              criteria: Determine if the `actual output` is correct based on the `input`.
              evaluationParams:
                - actualOutput
                - expectedOutput
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateMetricResponse"
              example:
                success: true
                deprecated: false

  /v1/batch-metrics:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Metrics
      summary: Batch Create
      operationId: createBatchMetrics
      description: Creates a batch of new metrics on your Confident AI project.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateBatchMetrics"
            example:
              metrics:
                - name: Correctness
                  criteria: Determine if the `actual output` is correct based on the `expected output`.
                  evaluationParams:
                    - actualOutput
                    - expectedOutput
                  multiTurn: false
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateBatchMetricsResponse"
              example:
                success: true
                data:
                  ids:
                    - METRIC-ID
                deprecated: false

  /v1/metric-collections:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Metric Collections
      summary: Add Collection
      operationId: createMetricCollection
      description: Creates a metric collection with the `name` and the `metricSettings` you specified.
      requestBody:
        description: ""
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMetricCollection"
            examples:
              Single-Turn:
                name: "Collection Name"
                multiTurn: false
                metricSettings:
                  - metric:
                      name: Answer Relevancy
                    threshold: 0.8
              Multi-Turn:
                name: "Collection Name"
                multiTurn: true
                metricSettings:
                  - metric:
                      name: Turn Relevancy
                    threshold: 0.8
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateMetricCollectionResponse"
              examples:
                Single-Turn:
                  success: true
                  data:
                    id: "COLLECTION-ID"
                  deprecated: false
                Multi-Turn:
                  success: true
                  data:
                    id: "COLLECTION-ID"
                  deprecated: false

    get:
      x-fern-server-name: Confident AI
      tags:
        - Metric Collections
      summary: List Metric Collections
      operationId: listMetricCollections
      description: Lists all the available metric collections in your Confident AI project.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetMetricCollectionResponse"
              examples:
                GetMetricCollections:
                  success: true
                  data:
                    metricCollections:
                      - id: "COLLECTION-ID"
                        name: "Collection Name"
                        multiTurn: false
                        metricSettings:
                          - metric:
                              name: "Faithfulness"
                            activated: true
                            threshold: 0.5
                            includeReason: true
                            strictMode: false

  /v1/metric-collections/{id}:
    put:
      x-fern-server-name: Confident AI
      tags:
        - Metric Collections
      summary: Update Collection
      operationId: updateMetricCollection
      description: Updates a metric collection's `name` and `metricSettings`.
      requestBody:
        description: ""
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMetricCollection"
            examples:
              Single-Turn:
                name: "New Collection Name"
                multiTurn: false
                metricSettings:
                  - metric:
                      name: "Faithfulness"
                    threshold: 0.5
              Multi-Turn:
                name: "New Collection Name"
                multiTurn: true
                metricSettings:
                  - metric:
                      name: "Role Adherence"
                    threshold: 0.5
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateMetricCollectionResponse"
              examples:
                Single-Turn:
                  success: true
                  data:
                    id: "COLLECTION-ID"
                  deprecated: false
                Multi-Turn:
                  success: true
                  data:
                    id: "COLLECTION-ID"
                  deprecated: false

  /v1/datasets/{alias}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Datasets
      summary: Pull Dataset
      operationId: pullDataset
      description: Retrieves a list of `Golden`s or `ConversationalGolden`s from your dataset.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetDatasetResponse"
              examples:
                Single-Turn:
                  success: true
                  data:
                    id: "DATASET-ID"
                    goldens:
                      - input: "How's the weather like in NYC?"
                        expectedOutput: "No idea"
                Multi-Turn:
                  success: true
                  data:
                    id: "DATASET-ID"
                    conversationalGoldens:
                      - scenario: "Booking a hotel"
                        expectedOutcome: "Successfully booked"
                        userDescription: "Finds hotels in NYC"

    post:
      x-fern-server-name: Confident AI
      tags:
        - Datasets
      summary: Push Dataset
      operationId: pushDataset
      description: Pushes a list of `Golden`s or `ConversationalGolden`s to your dataset.
      requestBody:
        description: ""
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PushDatasetRequestData"
            examples:
              Single-Turn:
                finalized: true
                goldens:
                  - input: "How is the weather like in NYC?"
                    expectedOutput: "No idea"
              Multi-Turn:
                finalized: true
                conversationalGoldens:
                  - scenario: "Booking a hotel"
                    expectedOutcome: "Successfully booked"
                    userDescription: "Finds hotels in NYC"
              Custom-Columns:
                finalized: true
                goldens:
                  - input: "What is 2 + 2?"
                    customColumnKeyValues:
                      key: "value"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateOrUpdateGoldenRequestData"
              examples:
                Single-Turn:
                  link: "https://app.confident-ai.com/project/<PROJECT-ID>/datasets/<DATASET-ID>"
                Multi-Turn:
                  link: "https://app.confident-ai.com/project/<PROJECT-ID>/datasets/<DATASET-ID>"
                Custom-Columns:
                  link: "https://app.confident-ai.com/project/<PROJECT-ID>/datasets/<DATASET-ID>"
    delete:
      x-fern-server-name: Confident AI
      tags:
        - Datasets
      summary: Delete Dataset
      operationId: deleteDataset
      description: |
        Permanently deletes a dataset and all its associated data.

        **Warning:** This action cannot be undone. All goldens or conversational goldens in the dataset will be deleted.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteDatasetResponse"
              example:
                success: true
                data:
                  id: "dataset-id"

  /v1/evaluate:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Run LLM Evals
      operationId: evaluateLLM
      description: Run online evals for your test cases using the metrics in `metricCollection`.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EvaluateRequest"
            examples:
              Single-Turn:
                metricCollection: "Collection Name"
                llmTestCases:
                  - input: "How tall is mount everest?"
                    actualOutput: "No clue, pretty tall I guess?"
              Multi-Turn:
                metricCollection: "Multi-Turn Collection Name"
                conversationalTestCases:
                  - turns:
                      - role: user
                        content: "How tall is Mount Everest?"
                      - role: assistant
                        content: "Mount Everest is approximately 8,848 meters tall."
                      - role: user
                        content: "Wow, that is really high! Has that changed recently?"
                      - role: assistant
                        content: "Yes, a 2020 survey by China and Nepal revised the height to 8,848.86 meters."
              Logging Parameters:
                metricCollection: "Collection Name"
                llmTestCases:
                  input: "How tall is mount everest?"
                  actualOutput: "No clue, pretty tall I guess?"
                hyperparameters:
                  model: "gpt-4o-mini"
                  prompt-version: "ai_generation_v2"
              Logging Identifier:
                metricCollection: "Collection Name"
                llmTestCases:
                  input: "How tall is mount everest?"
                  actualOutput: "No clue, pretty tall I guess?"
                  name: "Your Test Case Name"
                identifier: "run-399-102"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluateResponse"
              examples:
                Single-Turn:
                  success: true
                  data:
                    id: "TEST-RUN-ID"
                  deprecated: false
                Multi-Turn:
                  success: true
                  data:
                    id: "TEST-RUN-ID"
                  deprecated: false
                Logging Parameters:
                  success: true
                  data:
                    id: "TEST-RUN-ID"
                  deprecated: false
                Logging Identifier:
                  success: true
                  data:
                    id: "TEST-RUN-ID"
                  deprecated: false

  /v1/simulate:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Simulate Conversation
      operationId: simulateConversation
      description: Simulate the next conversation turn from a conversational golden.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SimulateRequest"
            examples:
              SimulationExample:
                golden:
                  scenario: "A frustrated user asking for a refund."
                  userDescription: "A white male who is a customer for over 2 years."
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulateResponse"
              examples:
                SimulationExample:
                  success: true
                  data:
                    simulationId: "SIMULATION-ID"
                    completed: false
                    userResponse: "I'd like my refund please."
                    turns:
                      - role: "assistant"
                        content: "Hey, how can I help you today?"
                      - role: "user"
                        content: "I'd like my refund please."
                  deprecated: false

  /v1/evaluate/spans/{spanUuid}:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Evaluate Span
      operationId: evaluateSpan
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EvaluateSpanRequest"
            examples:
              EvaluateSpan:
                metricCollection: "Collection Name"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluateSpanResponse"
              examples:
                EvaluateSpan:
                  success: true
                  data:
                    id: "SPAN-ID"
                  deprecated: false

  /v1/evaluate/traces/{traceUuid}:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Evaluate Trace
      operationId: evaluateTrace
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EvaluateTraceRequest"
            examples:
              EvaluateTrace:
                metricCollection: "Collection Name"
      responses:
        "200":
          description: Successful response from evaluate trace API
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluateTraceResponse"
              examples:
                EvaluateTrace:
                  success: true
                  data:
                    id: "TRACE-ID"
                  deprecated: false

  /v1/evaluate/threads/{theadUuid}:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Evaluate Thread
      description: Triggers evaluation of a thread using a specified metric collection and optional chatbot role instructions.
      operationId: evaluateThread
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EvaluateThreadRequest"
            examples:
              EvaluateThread:
                metricCollection: "Collection Name"
                chatbotRole: "You are a rich, powerful..."
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluateThreadResponse"
              examples:
                EvaluateThread:
                  success: true
                  data:
                    id: "THREAD-ID"
                  deprecated: false

  /v1/traces:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Tracing
      summary: Trace Ingestion
      operationId: createTrace
      description: Creates a new trace on Confident AI.
      requestBody:
        description: ""
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Trace"
            examples:
              Base-Span:
                uuid: "<TRACE-UUID>"
                input: "What is the capital of France?"
                output: "The capital of France is Paris."
                startTime: "2025-01-15T10:30:00Z"
                endTime: "2025-01-15T10:30:05Z"
                baseSpans:
                  - uuid: "<SPAN-UUID>"
                    name: "Agent"
                    input: "What is the capital of France?"
                    output: "Let me look that up for you."
                    startTime: "2025-01-15T10:30:00Z"
                    endTime: "2025-01-15T10:30:02Z"
              LLM-Span:
                uuid: "<TRACE-UUID>"
                input: "What is the capital of France?"
                output: "The capital of France is Paris."
                startTime: "2025-01-15T10:30:00Z"
                endTime: "2025-01-15T10:30:05Z"
                llmSpans:
                  - uuid: "<SPAN-UUID>"
                    name: "OpenAI Call"
                    model: "gpt-4o"
                    input: "What is the capital of France?"
                    output: "The capital of France is Paris."
                    startTime: "2025-01-15T10:30:00Z"
                    endTime: "2025-01-15T10:30:02Z"
              Thread-Id:
                uuid: "<TRACE-UUID>"
                input: "What is the capital of France?"
                output: "The capital of France is Paris."
                startTime: "2025-01-15T10:30:00Z"
                endTime: "2025-01-15T10:30:05Z"
                threadId: "<THREAD-ID>"
                baseSpans:
                  - uuid: "<SPAN-UUID>"
                    name: "Agent"
                    input: "What is the capital of France?"
                    output: "Let me look that up for you."
                    startTime: "2025-01-15T10:30:00Z"
                    endTime: "2025-01-15T10:30:02Z"
              User-Id:
                uuid: "<TRACE-UUID>"
                input: "What is the capital of France?"
                output: "The capital of France is Paris."
                startTime: "2025-01-15T10:30:00Z"
                endTime: "2025-01-15T10:30:05Z"
                userId: "<USER-ID>"
                baseSpans:
                  - uuid: "<SPAN-UUID>"
                    name: "Agent"
                    input: "What is the capital of France?"
                    output: "Let me look that up for you."
                    startTime: "2025-01-15T10:30:00Z"
                    endTime: "2025-01-15T10:30:02Z"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateTraceResponse"
              examples:
                Base-Span:
                  success: true
                  data:
                    id: "TRACE-ID"
                  link: "https://app.confident-ai.com/project/<PROJECT_ID>/observatory/traces/TRACE-ID"
                  deprecated: false
                LLM-Span:
                  success: true
                  data:
                    id: "TRACE-ID"
                  link: "https://app.confident-ai.com/project/<PROJECT_ID>/observatory/traces/TRACE-ID"
                  deprecated: false
                Thread-Id:
                  success: true
                  data:
                    id: "TRACE-ID"
                  link: "https://app.confident-ai.com/project/<PROJECT_ID>/observatory/traces/TRACE-ID"
                  deprecated: false
                User-Id:
                  success: true
                  data:
                    id: "TRACE-ID"
                  link: "https://app.confident-ai.com/project/<PROJECT_ID>/observatory/traces/TRACE-ID"
                  deprecated: false
    get:
      x-fern-server-name: Confident AI
      tags:
        - Tracing
      summary: List Traces
      operationId: getTrace
      description: Retrieves a list of traces from your Confident AI project.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetTraceResponse"
              example:
                success: true
                data:
                  traces:
                    - id: "TRACE-ID"
                      name: "Trace Name"
                      created_at: "2025-01-15T10:30:00Z"
                      ended_at: "2025-01-15T10:30:05Z"
                      uuid: "TRACE-UUID"
                      projectId: "PROJECT-ID"
                      environment: "production"
                      tags:
                        - "General QA"
                      metadataValues:
                        - key: "ip_address"
                          value: "127.0.0.1"
                      spans:
                        - id: "SPAN-ID"
                          uuid: "SPAN-UUID"
                          name: "Span Name"
                          startTime: "2025-01-15T10:30:00Z"
                          endTime: "2025-01-15T10:30:05Z"
                          traceUuid: "TRACE-UUID"
                          status: "SUCCESS"
                          type: "LLM"
                          model: "gpt-4o"
                  totalTraces: 1
                deprecated: false

  #   /v1/traces/{uuid}:
  #     put:
  #       x-fern-server-name: Confident AI
  #       tags:
  #         - Tracing
  #       summary: Update Trace
  #       operationId: updateTrace
  #       description: Updates an existing trace on your Confident AI project.
  #       requestBody:
  #         description: ""
  #         required: true
  #         content:
  #           application/json:
  #             schema:
  #               $ref: "#/components/schemas/UpdateTrace"
  #             examples:
  #               example1:
  #                 output: "The capital of France is Rome"
  #                 endTime: "2025-01-16T10:30:05Z"
  #                 metadata:
  #                   ip_address: "127.0.0.1"
  #                 tags:
  #                   - "General QA"
  #
  #       responses:
  #         "200":
  #           description: ""
  #           content:
  #             application/json:
  #               schema:
  #                 $ref: "#/components/schemas/UpdateTraceResponse"
  #               examples:
  #                 example1:
  #                   success: true
  #                   data:
  #                     id: "TRACE-ID"
  #                   deprecated: false

  /v1/threads:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Threads
      summary: List Threads
      operationId: listThreads
      description: Retrieves a list of threads from your Confident AI project.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the page number of the threads to return. Defaulted to 1.
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the maximum number of threads per page. Defaulted to 25.
        - in: query
          name: environment
          required: false
          schema:
            type: string
          description: This filters the threads by the environment where the thread was created, and returns threads from all environments if not specified.
        - in: query
          name: start
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for threads created after the specified start datetime. Defaulted to 30 days ago.
        - in: query
          name: end
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for threads created before the specified end datetime. Defaulted to the current time.
        - in: query
          name: sortBy
          required: false
          schema:
            type: string
            enum: [createdAt, lastActivity]
          description: This determines the field to sort by. Defaulted to `lastActivity`.
        - in: query
          name: ascending
          required: false
          schema:
            type: boolean
          description: This determines if the field specified in `sortBy` should be in ascending order. Defaults to `false`.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListThreadsResponse"
              example:
                success: true
                data:
                  threads:
                    - threadId: "THREAD-ID"
                      suppliedThreadId: "thread-123"
                      createdAt: "2025-01-15T10:30:00Z"
                      lastActivity: "2025-01-15T11:45:00Z"
                      metadata:
                        userId: "user-456"
                      tags:
                        - "support"
                      metricCollectionName: "conversation-metrics"
                      totalTraces: 5
                  totalThreads: 100
                deprecated: false

  /v1/threads/{threadId}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Threads
      summary: Retrieve Thread
      operationId: retrieveThread
      description: Retrieves a thread by ID from your Confident AI project.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: threadId
          required: true
          schema:
            type: string
          description: This is the ID of the thread you wish to retrieve.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetThreadResponse"
              example:
                success: true
                data:
                  threadId: "THREAD-ID"
                  suppliedThreadId: "thread-123"
                  createdAt: "2025-01-15T10:30:00Z"
                  lastActivity: "2025-01-15T11:45:00Z"
                  metadata:
                    userId: "user-456"
                  tags:
                    - "support"
                  metricCollectionName: "conversation-metrics"
                  totalTraces: 5
                  metricsData:
                    - metricName: "Answer Relevancy"
                      score: 0.95
                  annotations:
                    - id: "annotation-1"
                      rating: 5
                  traces:
                    - id: "TRACE-ID"
                      uuid: "trace-uuid-1"
                      name: "User Message"
                      created_at: "2025-01-15T10:30:00Z"
                      ended_at: "2025-01-15T10:30:05Z"
                      input: "Hello, I need help"
                      output: "Hi! How can I assist you today?"
                      environment: "production"
                deprecated: false

  /v1/prompts:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: Push Prompts
      operationId: pushPrompt
      description: Creates a new commit for an existing prompt, or creates a new prompt with the given `alias` otherwise.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePromptRequest"
            examples:
              Text-Prompt:
                alias: "Prompt Name"
                text: "Hello, {{name}}!"
                interpolationType: "FSTRING"
                outputType: "TEXT"
              List-Prompt:
                alias: "Prompt Name"
                messages:
                  - role: user
                    content: "What is the weather like in {{city}}?"
                interpolationType: "FSTRING"
                outputType: "TEXT"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreatePromptResponse"
              examples:
                Text-Prompt:
                  success: true
                  data:
                    promptId: "prm_xyz456"
                    hash: "bab04ce"
                  link: "https://app.confident-ai.com/project/<PROJECT_ID>/prompt-studio/editor/prm_xyz456"
                  deprecated: false
                List-Prompt:
                  success: true
                  data:
                    promptId: "prm_xyz456"
                    hash: "bab04ce"
                    link: "https://app.confident-ai.com/project/<PROJECT_ID>/prompt-studio/editor/prm_xyz456"
                  deprecated: false

  /v1/prompts/{alias}/labels/{label}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: Pull Prompts By Label
      operationId: getPromptByLabel
      description: Retrieves a prompt with `alias` and `label` from your Confident AI account.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPromptResponse"
              examples:
                Text-Example:
                  value:
                    success: true
                    data:
                      id: "prv_abc123"
                      version: "00.00.02"
                      label: "my-label"
                      hash: "bab04ce"
                      text: "Hello, {{name}}!"
                      type: "TEXT"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false
                Message-Example:
                  value:
                    success: true
                    data:
                      id: "prv_abc123"
                      version: "00.00.02"
                      label: "my-label"
                      hash: "bab04ce"
                      messages:
                        - role: system
                          content: "Hello, {{name}}"
                      type: "LIST"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false

  /v1/prompts/{alias}/versions/{version}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: Pull Prompts By Version
      operationId: getPromptByVersion
      description: Retrieves a prompt with `alias` and `version` from your Confident AI account.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPromptResponse"
              examples:
                Text-Example:
                  value:
                    success: true
                    data:
                      id: "prv_abc123"
                      version: "00.00.01"
                      label: "my-label"
                      hash: "bab04ce"
                      text: "Hello, {{name}}!"
                      type: "TEXT"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false
                Message-Example:
                  value:
                    success: false
                    data:
                      id: "prv_abc123"
                      version: "00.00.02"
                      label: "my-label"
                      hash: "bab04ce"
                      messages:
                        - role: system
                          content: "Hello, {{name}}"
                      type: "LIST"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false

  /v1/prompts/{alias}/commits/{hash}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: Pull Prompts By Commit
      operationId: getPromptByCommit
      description: Retrieves a prompt with `alias` and the specific `hash` from your Confident AI account.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPromptResponse"
              examples:
                Text-Example:
                  value:
                    success: true
                    data:
                      id: "prv_abc123"
                      version: "00.00.01"
                      label: "my-label"
                      hash: "bab04ce"
                      text: "Hello, {{name}}!"
                      type: "TEXT"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false
                Message-Example:
                  value:
                    success: false
                    data:
                      id: "prv_abc123"
                      version: "00.00.02"
                      label: "my-label"
                      hash: "bab04ce"
                      messages:
                        - role: system
                          content: "Hello, {{name}}"
                      type: "LIST"
                      interpolationType: "FSTRING"
                      outputType: "TEXT"
                      modelSettings:
                        provider: "OPEN_AI"
                        name: "gpt-4o"
                        temperature: 0.7
                    deprecated: false

  /v1/prompts/{alias}/versions:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: List Versions
      operationId: getPromptVersions
      description: Retrieves a list of all versions associated with a given prompt `alias`.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PromptVersionsResponse"
              example:
                success: true
                data:
                  textVersions:
                    - id: "prm_xyz456"
                      version: "00.00.01"
                  messagesVersions: null
                deprecated: false
    post:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: Create Version
      operationId: createVersion
      description: Creates a new version of the specified or latest commit on your Confident AI project.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePromptVersionRequest"
            examples:
              With-Hash:
                hash: "bab04ce"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreatePromptVersionResponse"
              examples:
                With-Hash:
                  success: true
                  data:
                    version: "00.00.01"
                    hash: "bab04ce"
                  deprecated: false
                Without-Hash:
                  success: true
                  data:
                    version: "00.00.01"
                    hash: "9ace048"
                  deprecated: false

  /v1/prompts/{alias}/commits:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Prompt
      summary: List Commits
      operationId: getPromptCommits
      description: Retrieves a list of all the commits associated with a prompt
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PromptCommitsResponse"
              example:
                success: true
                data:
                  commits:
                    - id: "144aa01d-af4d-4054-83fa-78e2301d94fb"
                      hash: "bab04ce"
                      message: "Committed from API"
                deprecated: false

  /v1/test-runs/{testRunId}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: Retrieve Test Run
      operationId: getTestRun
      description: Retrieves a list of test cases and their respective metrics from a test run.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TestRunResponse"
              examples:
                Single-Turn:
                  value:
                    success: true
                    data:
                      metricsScores:
                        - metric: "Answer Correctness"
                          scores: [0]
                          passes: 0
                          fails: 1
                          errors: 0
                      traceMetricsScores: []
                      conversational: false
                      identifier: "test-run-001"
                      status: "COMPLETED"
                      testsPassed: 0
                      testsFailed: 1
                      totalTests: 1
                      runDuration: 1.5
                      testCases:
                        - id: "TEST-CASE-ID"
                          name: "Test Case 1"
                          input: "What's the capital of France?"
                          expectedOutput: "Paris"
                          actualOutput: "San Francisco"
                          success: false
                          context: ["The capital of France is Paris."]
                          retrievalContext: ["The capital of France is Paris."]
                          runDuration: 1.2
                          evaluationCost: 0.001
                          metricsData:
                            - id: "METRIC-ID"
                              score: 0
                              reason: "The capital of France is Paris."
                              success: false
                              threshold: 0.5
                              evaluationModel: "gpt-4.1"
                              strictMode: false
                              evaluationCost: 0.001
                              name: "Answer Correctness"
                              verboseLogs: "..."
                    deprecated: false
                Multi-Turn:
                  value:
                    success: true
                    data:
                      metricsScores:
                        - metric: "Conversation Completeness"
                          scores: [0.85]
                          passes: 1
                          fails: 0
                          errors: 0
                      traceMetricsScores: []
                      conversational: true
                      identifier: "test-run-002"
                      status: "COMPLETED"
                      testsPassed: 1
                      testsFailed: 0
                      totalTests: 1
                      runDuration: 2.3
                      testCases:
                        - id: "CONV-TEST-CASE-ID"
                          name: "Mount Everest Conversation"
                          scenario: "User asking about Mount Everest"
                          expectedOutcome: "Assistant provides accurate height information"
                          userDescription: "A curious user asking geography questions"
                          context: ["Mount Everest is 8,848 meters tall."]
                          success: true
                          runDuration: 2.1
                          evaluationCost: 0.002
                          turns:
                            - role: "user"
                              content: "How tall is Mount Everest?"
                            - role: "assistant"
                              content: "Mount Everest is approximately 8,848 meters (29,029 feet) tall."
                          metricsData:
                            - id: "METRIC-ID"
                              score: 0.85
                              reason: "The assistant provided accurate information about Mount Everest's height."
                              success: true
                              threshold: 0.7
                              evaluationModel: "gpt-4.1"
                              strictMode: false
                              evaluationCost: 0.002
                              name: "Conversation Completeness"
                              verboseLogs: "..."
                    deprecated: false

  /v1/test-runs:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Evaluation
      summary: List Test Runs
      operationId: listTestRuns
      description: >-
        Retrieves a paginated list of test runs for the authorized project.
        Results can be filtered and sorted by status, dates, conversational (multi-turn) or metrics.
        Pagination is controlled with `page` and `pageSize`. Filtering and sorting options include `status`, `multiTurn`, `sortField`, and `ascending`.
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number (must be a positive integer, default is 1).
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 25
          description: Number of items per page (max 100, default is 25).
        - in: query
          name: status
          schema:
            type: string
            enum: [COMPLETED, ERRORED, IN_PROGRESS, CANCELLED]
          description: Filter test runs by status.
        - in: query
          name: multiTurn
          schema:
            type: string
            enum: ["true", "false"]
          description: Filter for conversational (multi-turn) test runs only ("true" or "false").
        - in: query
          name: sortBy
          schema:
            type: string
            enum: ["createdAt", "runDuration"]
            default: "createdAt"
          description: Field to sort results by ("createdAt" or "runDuration").
        - in: query
          name: ascending
          schema:
            type: string
            enum: ["true", "false"]
            default: "false"
          description: Sort ascending (true) or descending (false).
        - in: query
          name: start
          schema:
            type: string
            format: datetime
          description: ISO 8601 start datetime filter (e.g. "2025-12-31T23:59:59Z").
        - in: query
          name: end
          schema:
            type: string
            format: datetime
          description: ISO 8601 end datetime filter (e.g. "2025-12-31T23:59:59Z").
      responses:
        "200":
          description: A paginated list of test runs and total count.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      testRuns:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: Test run unique identifier.
                            createdAt:
                              type: string
                              format: datetime
                            identifier:
                              type: string
                              nullable: true
                              description: Optional test run identifier.
                            status:
                              type: string
                              enum: [COMPLETED, ERRORED, IN_PROGRESS, CANCELLED]
                            multiTurn:
                              type: boolean
                              description: Whether the test run is conversational.
                            testsPassed:
                              type: integer
                              nullable: true
                            testsFailed:
                              type: integer
                              nullable: true
                            totalTests:
                              type: integer
                              nullable: true
                            metricsScores:
                              type: array
                              items:
                                type: object
                                properties:
                                  metric:
                                    type: string
                                  scores:
                                    type: array
                                    items:
                                      type: number
                                    nullable: true
                                  passes:
                                    type: integer
                                    nullable: true
                                  fails:
                                    type: integer
                                    nullable: true
                                  errors:
                                    type: integer
                                    nullable: true
                            runDuration:
                              type: number
                              nullable: true
                            evaluationCost:
                              type: number
                              nullable: true
                            datasetAlias:
                              type: string
                              nullable: true
                            testFile:
                              type: string
                              nullable: true
                            summary:
                              type: object
                              nullable: true
                              properties:
                                topicSummaries:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      topic:
                                        type: string
                                      testCaseIds:
                                        type: array
                                        items:
                                          oneOf:
                                            - type: integer
                                            - type: string
                                      summaryPoints:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            grade:
                                              type: number
                                            content:
                                              type: string
                                            testCaseIds:
                                              type: array
                                              items:
                                                oneOf:
                                                  - type: integer
                                                  - type: string
                                summaryOverview:
                                  type: object
                                  properties:
                                    summary:
                                      type: array
                                      items:
                                        type: string
                                    actionItems:
                                      type: array
                                      items:
                                        type: string
                      totalTestRuns:
                        type: integer
                        description: Total number of test runs matching filters.
                      page:
                        type: integer
                        example: 1
                        description: Current page number.
                      pageSize:
                        type: integer
                        example: 25
                        description: Page size.
                required:
                  - success
                  - data
              example:
                success: true
                data:
                  testRuns:
                    - id: "342bd7a6"
                      createdAt: "2024-06-01T12:34:56Z"
                      identifier: "run042"
                      status: "COMPLETED"
                      multiTurn: false
                      testsPassed: 8
                      testsFailed: 2
                      totalTests: 10
                      metricsScores:
                        - metric: "Answer Correctness"
                          scores: [0.9, 1.0]
                          passes: 8
                          fails: 2
                          errors: 0
                      runDuration: 15.2
                      evaluationCost: 0.254
                      datasetAlias: "agent"
                      testFile: "test-file-1.jsonl"
                      summary: "8/10 passed"
                  totalTestRuns: 113
                  page: 1
                  pageSize: 25

  /v1/annotations:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Annotations
      summary: List Annotations
      operationId: listAnnotations
      description: |
        Retrieves a paginated list of annotations from your Confident AI project. Annotations are user feedback on traces, spans, or threads that include ratings, expected outputs/outcomes, explanations, and flags.

        Use query parameters to filter annotations by trace UUID, span UUID, thread ID, type, rating range, or flagged status. Results are returned in descending order by creation date with pagination support.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: query
          name: traceUuid
          schema:
            type: string
          description: Filter annotations by trace UUID.
        - in: query
          name: spanUuid
          schema:
            type: string
          description: Filter annotations by span UUID.
        - in: query
          name: threadId
          schema:
            type: string
          description: Filter annotations by thread ID.
        - in: query
          name: type
          schema:
            type: string
            enum: [THUMBS_RATING, FIVE_STAR_RATING]
          description: Filter annotations by type.
        - in: query
          name: minRating
          schema:
            type: string
          description: Filter annotations with minimum rating (inclusive).
        - in: query
          name: maxRating
          schema:
            type: string
          description: Filter annotations with maximum rating (inclusive).
        - in: query
          name: flagged
          schema:
            type: string
            enum: ["true", "false"]
          description: Filter annotations by flagged status.
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the page number of the annotations to return. Defaulted to 1.
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the maximum number of annotations per page. Defaulted to 25.
        - in: query
          name: start
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for annotations created after the specified start datetime. Defaulted to 30 days ago.
        - in: query
          name: end
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for annotations created before the specified end datetime. Defaulted to the current time.
        - in: query
          name: sortBy
          required: false
          schema:
            type: string
            enum: [createdAt]
          description: This determines the field to sort by. Defaulted to `createdAt`.
        - in: query
          name: ascending
          required: false
          schema:
            type: boolean
          description: This determines if the field specified in `sortBy` should be in ascending order. Defaults to `false`.
      responses:
        "200":
          description: Successfully retrieved list of annotations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListAnnotationsResponse"
              example:
                success: true
                data:
                  annotations:
                    - id: "annotation-uuid-1"
                      rating: 1
                      type: "THUMBS_RATING"
                      name: "Quality Check"
                      expectedOutput: "Provide clear password reset instructions"
                      explanation: "Response correctly guides user through password reset"
                      flagged: false
                      createdAt: "2025-11-12T10:30:00Z"
                      traceUuid: "trace-uuid-1"
                    - id: "annotation-uuid-2"
                      rating: 5
                      type: "FIVE_STAR_RATING"
                      name: "Customer Service"
                      expectedOutcome: "Agent successfully resolves user issue"
                      explanation: "Excellent resolution with follow-up"
                      flagged: false
                      createdAt: "2025-11-12T09:15:00Z"
                      threadId: "thread-id-1"
                  total: 150
    post:
      x-fern-server-name: Confident AI
      tags:
        - Annotations
      summary: Create Annotation
      operationId: createAnnotation
      x-fern-examples:
        - name: Thumbs Rating
          request:
            traceUuid: "<TRACE-UUID>"
            rating: 1
            type: "THUMBS_RATING"
            expectedOutput: "Provide a clear, step-by-step password reset flow."
            explanation: "Response acknowledges issue and guides the user through reset steps."
          response:
            body:
              success: true
              data:
                id: "ANNOTATION-ID"
              deprecated: false
        - name: Five Star Rating
          request:
            spanUuid: "<SPAN-UUID>"
            rating: 5
            type: "FIVE_STAR_RATING"
            expectedOutput: "Include verification, link to reset page, and confirmation messaging."
            explanation: "High-quality answer with actionable steps and safety considerations."
          response:
            body:
              success: true
              data:
                id: "ANNOTATION-ID"
              deprecated: false
      description: |
        Creates a new annotation for a trace, span, or thread in your Confident AI project. Annotations capture human feedback including ratings, expected outputs/outcomes, explanations, and flags.

        **Important validation rules:**
        - For traces and spans: Use `expectedOutput` (not `expectedOutcome`)
        - For threads: Use `expectedOutcome` (not `expectedOutput`)
        - Rating must be 0 or 1 for THUMBS_RATING, or 1-5 for FIVE_STAR_RATING
        - You must provide either `traceUuid`, `spanUuid`, or `threadId`
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAnnotation"
      responses:
        "200":
          description: Successfully created annotation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateAnnotationResponse"

  /v1/annotations/{annotationId}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Annotations
      summary: Get Annotation
      operationId: getAnnotation
      description: |
        Retrieves a specific annotation by its unique ID. Returns the complete annotation details including rating, type, expected output/outcome, explanation, flagged status, and associated trace/span/thread identifiers.

        This endpoint verifies that the annotation belongs to your project before returning it.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: annotationId
          required: true
          schema:
            type: string
          description: The ID of the annotation to retrieve.
      responses:
        "200":
          description: Successfully retrieved annotation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetAnnotationResponse"
              example:
                success: true
                data:
                  annotation:
                    id: "annotation-uuid"
                    rating: 1
                    type: "THUMBS_RATING"
                    name: "Quality Check"
                    expectedOutput: "Provide clear password reset instructions"
                    explanation: "Response correctly guides user through password reset"
                    flagged: false
                    createdAt: "2025-11-12T10:30:00Z"
                    traceUuid: "trace-uuid-1"
        "404":
          description: Annotation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      x-fern-server-name: Confident AI
      tags:
        - Annotations
      summary: Update Annotation
      operationId: updateAnnotation
      description: |
        Updates an existing annotation's properties such as rating, type, expected output/outcome, explanation, or flagged status.

        **Validation rules:**
        - Thread annotations cannot have `expectedOutput` (use `expectedOutcome` instead)
        - Trace/span annotations cannot have `expectedOutcome` (use `expectedOutput` instead)
        - The annotation must belong to your project
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: annotationId
          required: true
          schema:
            type: string
          description: The ID of the annotation to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAnnotation"
            example:
              rating: 5
              type: "FIVE_STAR_RATING"
              expectedOutput: "Provide detailed password reset steps with security considerations"
              explanation: "Updated: Response now includes security best practices"
              flagged: false
      responses:
        "200":
          description: Successfully updated annotation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateAnnotationResponse"
              example:
                success: true
                data:
                  id: "ANNOTATION-ID"
                deprecated: false
        "404":
          description: Annotation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/annotation-queues:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: List Annotation Queues
      operationId: listAnnotationQueues
      description: |
        Retrieves all annotation queues in your project with statistics and pagination support. Each queue includes completion metrics, item counts, and assignment breakdowns.

        Filter results by queue type (TRACE, SPAN, THREAD, GOLDEN, TEST_RUN) or search by name. Queues are returned in descending order by creation date.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the page number of the annotation queues to return. Defaulted to 1.
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the maximum number of annotation queues per page. Defaulted to 25.
        - in: query
          name: start
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for annotation queues created after the specified start datetime. Defaulted to 30 days ago.
        - in: query
          name: end
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for annotation queues created before the specified end datetime. Defaulted to the current time.
        - in: query
          name: sortBy
          required: false
          schema:
            type: string
            enum: [createdAt]
          description: This determines the field to sort by. Defaulted to `createdAt`.
        - in: query
          name: ascending
          required: false
          schema:
            type: boolean
          description: This determines if the field specified in `sortBy` should be in ascending order. Defaults to `false`.
        - in: query
          name: type
          schema:
            type: string
            enum: [TRACE, SPAN, THREAD, GOLDEN, TEST_RUN]
          description: Filter by queue type
        - in: query
          name: searchTerm
          schema:
            type: string
          description: Search queues by name
      responses:
        "200":
          description: Successfully retrieved list of annotation queues
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListAnnotationQueuesResponse"
              example:
                success: true
                data:
                  annotationQueues:
                    - id: "queue-uuid-1"
                      name: "Trace Review Queue"
                      type: "TRACE"
                      createdAt: "2025-11-12T10:00:00Z"
                      updatedAt: "2025-11-12T11:00:00Z"
                      completedItems: 45
                      totalItems: 100
                      completionPercentage: 45
                    - id: "queue-uuid-2"
                      name: "Span Quality Check"
                      type: "SPAN"
                      createdAt: "2025-11-11T09:00:00Z"
                      updatedAt: "2025-11-12T10:00:00Z"
                      completedItems: 20
                      totalItems: 50
                      completionPercentage: 40
                  total: 2
    post:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: Create Annotation Queue
      operationId: createAnnotationQueue
      description: |
        Creates a new annotation queue for organizing traces, spans, threads, golden datasets, or test runs for systematic review and annotation.

        **Queue types:**
        - `TRACE`: Queue for reviewing complete trace executions
        - `SPAN`: Queue for reviewing individual spans within traces
        - `THREAD`: Queue for reviewing conversation threads
        - `GOLDEN`: Queue for creating golden datasets
        - `TEST_RUN`: Queue for reviewing test run results

        Queue names must be unique within your project.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAnnotationQueue"
      responses:
        "200":
          description: Successfully created annotation queue
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateAnnotationQueueResponse"
              example:
                success: true
                data:
                  id: "queue-uuid"

  /v1/annotation-queues/{queueId}:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: Get Annotation Queue
      operationId: getAnnotationQueue
      description: |
        Retrieves detailed information about a specific annotation queue including comprehensive statistics.

        Returns queue metadata, completion metrics (total items, completed items, pending items, completion percentage), and assignment breakdowns showing how many items are assigned to each user and their completion status.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: queueId
          required: true
          schema:
            type: string
          description: The ID of the queue to retrieve.
      responses:
        "200":
          description: Successfully retrieved annotation queue
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetAnnotationQueueResponse"
              example:
                success: true
                data:
                  annotationQueue:
                    id: "queue-uuid"
                    name: "Trace Review Queue"
                    type: "TRACE"
                    createdAt: "2025-11-12T10:00:00Z"
                    updatedAt: "2025-11-12T11:00:00Z"
                    completedItems: 45
                    totalItems: 100
                    pendingItems: 55
                    completionPercentage: 45
                    assignedItems: 60
                    assignmentBreakdown:
                      "user1@example.com":
                        assigned: 30
                        completed: 25
                      "user2@example.com":
                        assigned: 30
                        completed: 20
        "404":
          description: Queue not found
    delete:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: Delete Annotation Queue
      operationId: deleteAnnotationQueue
      description: |
        Permanently deletes an annotation queue and all its associated queue items.

        **Warning:** This action cannot be undone. All queue items (assignments and completion status) will be deleted. However, any annotations created from this queue will remain in your project.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: queueId
          required: true
          schema:
            type: string
          description: The ID of the queue to delete.
      responses:
        "200":
          description: Successfully deleted annotation queue
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteAnnotationQueueResponse"
              example:
                success: true
                data:
                  id: "queue-uuid"

  /v1/annotation-queues/{queueId}/items:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: List Queue Items
      operationId: listQueueItems
      description: |
        Retrieves all items in an annotation queue with pagination and optional filtering by completion status.

        Use the `completed` query parameter to filter for pending items (`false`) or completed items (`true`). Omit this parameter to retrieve all items regardless of completion status. Items are returned in ascending order by the time they were added to the queue.
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: queueId
          required: true
          schema:
            type: string
          description: The ID of the queue.
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the page number of the queue items to return. Defaulted to 1.
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
          description: This specifies the maximum number of queue items per page. Defaulted to 25.
        - in: query
          name: start
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for queue items added after the specified start datetime. Defaulted to 30 days ago.
        - in: query
          name: end
          required: false
          schema:
            type: string
            format: date-time
          description: This filters for queue items added before the specified end datetime. Defaulted to the current time.
        - in: query
          name: sortBy
          required: false
          schema:
            type: string
            enum: [addedAt]
          description: This determines the field to sort by. Defaulted to `addedAt`.
        - in: query
          name: ascending
          required: false
          schema:
            type: boolean
          description: This determines if the field specified in `sortBy` should be in ascending order. Defaults to `false`.
        - in: query
          name: completed
          schema:
            type: string
            enum: [true, false]
          description: Filter by completion status (true for completed, false for pending). Omit to return all items.
      responses:
        "200":
          description: Successfully retrieved list of queue items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListQueueItemsResponse"
              example:
                success: true
                data:
                  items:
                    - id: "item-uuid-1"
                      traceUuid: "trace-uuid-1"
                      addedAt: "2025-11-12T10:00:00Z"
                      completed: false
                      assignedToEmail: "user@example.com"
                    - id: "item-uuid-2"
                      spanUuid: "span-uuid-1"
                      addedAt: "2025-11-12T10:01:00Z"
                      completed: true
                      assignedToEmail: null

  /v1/annotation-queues/{itemId}/annotate:
    post:
      x-fern-server-name: Confident AI
      tags:
        - Annotation Queues
      summary: Annotate Queue Item
      operationId: annotateItem
      description: |
        Creates an annotation for a single queue item. This endpoint automatically associates the annotation with the correct trace, span, or thread based on the queue item.

        **Validation rules:**
        - For thread items: Use `expectedOutcome` (not `expectedOutput`)
        - For trace/span items: Use `expectedOutput` (not `expectedOutcome`)
        - Set `markAsCompleted: true` to automatically mark the queue item as completed after annotation (default: true)
      parameters:
        - in: header
          name: CONFIDENT_API_KEY
          required: true
          description: The API key of your Confident AI project.
          schema:
            type: string
          example: "<PROJECT-API-KEY>"
        - in: path
          name: itemId
          required: true
          schema:
            type: string
          description: The ID of the queue item to annotate.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AnnotateItem"
            example:
              rating: 1
              type: "THUMBS_RATING"
              name: "Quality Check"
              explanation: "Response is accurate and helpful"
              flagged: false
              markAsCompleted: true
      responses:
        "200":
          description: Successfully created annotation for queue item
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AnnotateItemResponse"
              example:
                success: true
                data:
                  id: "annotation-uuid"

  /v1/projects:
    get:
      x-fern-server-name: Confident AI
      tags:
        - Projects
      summary: List Projects
      operationId: listProjects
      description: Retrieves all projects within your organization.
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetProjectsResponse"
              example:
                success: true
                data:
                  projects:
                    - id: "clxxxxx"
                      name: "Production App"
                      description: "Main production application"
                      organizationId: "clxxxxx"
                      created_at: "2024-12-04T23:00:00.000Z"
                    - id: "clxxxxx"
                      name: "Staging Environment"
                      description: null
                      organizationId: "clxxxxx"
                      created_at: "2024-12-03T15:30:00.000Z"
    post:
      x-fern-server-name: Confident AI
      tags:
        - Projects
      summary: Create Project
      operationId: createProject
      description: Creates a new project within your organization.
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProject"
            example:
              name: "New Project"
              description: "This is a new project for testing"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateProjectResponse"
              example:
                success: true
                data:
                  project:
                    id: "clxxxxx"
                    name: "New Project"
                    description: "This is a new project for testing"
                    organizationId: "clxxxxx"
                    created_at: "2024-12-04T23:00:00.000Z"

  /v1/projects/{projectId}:
    put:
      x-fern-server-name: Confident AI
      tags:
        - Projects
      summary: Update Project
      operationId: updateProject
      description: Updates an existing project's name or description.
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
          description: The unique identifier of the project to update
      requestBody:
        required: true
        description: ""
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProject"
            example:
              name: "Updated Project Name"
              description: "Updated description"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateProjectResponse"
              example:
                success: true
                data:
                  project:
                    id: "clxxxxx"
                    name: "Updated Project Name"
                    description: "Updated description"
                    organizationId: "clxxxxx"
                    created_at: "2024-12-04T23:00:00.000Z"

components:
  schemas:
    Metric:
      type: object
      properties:
        id:
          type: string
          description: This is the unique id of the metric.
        name:
          type: string
          description: This is the name of the metric, it's unique to all metrics.
        criteria:
          type: string
          description: This is the criteria this metric uses to evaluate test cases.
        evaluationSteps:
          type: string
          description: This is the alternative of criteria and is used to evaluate your test cases.
        evaluationParams:
          description: It is an array of the params that will be used to evaluate your test cases.
          oneOf:
            - type: array
              title: llmTestCaseParams
              items:
                type: string
                enum:
                  [
                    input,
                    actualOutput,
                    expectedOutput,
                    context,
                    toolsCalled,
                    expectedTools,
                    retrievalContext,
                  ]
            - type: array
              title: conversationalTestCaseParams
              items:
                type: string
                enum:
                  [
                    turns,
                    scenario,
                    expectedOutcome,
                    userDescription,
                    context,
                    chatbotRole,
                  ]
        multiTurn:
          type: boolean
          description: This is true if the metric is used to evaluate multi-turn test cases.
        rubric:
          type: array
          description: A list of score ranges (010 inclusive). Must be in order and non-overlapping. Click here to [learn more](https://deepeval.com/docs/metrics-llm-evals#rubric)
          items:
            $ref: "#/components/schemas/Rubric"
      required:
        - name
        - multiTurn

    CreateBatchMetrics:
      type: object
      properties:
        metrics:
          type: array
          description: This is the list of metrics you want to add to your project.
          items:
            $ref: "#/components/schemas/Metric"
      required:
        - metrics

    CreateBatchMetricsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metrics were created successfully."
        data:
          type: object
          description: "This maps to the ids of the metrics created."
          properties:
            ids:
              type: array
              description: The ids of the batch metrics created.
              items:
                type: string
          required:
            - ids
        deprecated:
          type: boolean
          description: "This is true if this batch metrics endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    GetMetricResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metrics were successfully retrieved."
        data:
          type: object
          description: "This maps to all the metrics retrieved."
          properties:
            metrics:
              type: array
              items:
                $ref: "#/components/schemas/Metric"
          required:
            - metrics
        deprecated:
          type: boolean
          description: "This is true if this metrics endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    CreateMetric:
      type: object
      properties:
        name:
          type: string
          description: The name of the metric you're creating in your project.
        criteria:
          type: string
          description: The criteria for this particular metric, that will be used to evaluate test cases later.
        evaluationSteps:
          type: string
          description: An alternative to criteria, it is a list of steps to take to evaluate your test cases.
        evaluationParams:
          description: It is an array of the params that will be used to evaluate your test cases.
          oneOf:
            - type: array
              title: llmTestCaseParams
              items:
                type: string
                enum:
                  [
                    input,
                    actualOutput,
                    expectedOutput,
                    context,
                    toolsCalled,
                    expectedTools,
                    retrievalContext,
                  ]
            - type: array
              title: conversationalTestCaseParams
              items:
                type: string
                enum:
                  [
                    role,
                    content,
                    scenario,
                    toolsCalled,
                    expectedOutcome,
                    retrievalContext,
                  ]
        multiTurn:
          type: boolean
          description: This is true if your metric is used for evaluating multi-turn test cases.
        rubric:
          type: array
          description: A list of score ranges (010 inclusive). Must be in order and non-overlapping. Click here to [learn more](https://deepeval.com/docs/metrics-llm-evals#rubric)
          items:
            $ref: "#/components/schemas/Rubric"

      required:
        - name
        - multiTurn

    Rubric:
      type: object
      description: A list of score ranges (010 inclusive). Must be in order and non-overlapping. Click here to [learn more](https://deepeval.com/docs/metrics-llm-evals#rubric)
      properties:
        scoreRange:
          type: array
          description: An array consisting of the ranges of scores to generate.
          items:
            type: number
        expectedOutcome:
          type: string
          description: The expected outcome for your evaluation.
      required:
        - scoreRange
        - expectedOutcome

    CreateMetricResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metric was created successfully."
        data:
          type: object
          description: "This maps to the id of the metric created."
          properties:
            id:
              type: string
              description: The id of the metric created
          required:
            - id
        deprecated:
          type: boolean
          description: "This is true if this metrics endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    UpdateMetric:
      type: object
      properties:
        name:
          type: string
          description: The name of the metric you're updating.
        criteria:
          type: string
          description: The new criteria for this particular metric, that you want to update to.
        evaluationSteps:
          type: string
          description: The new evaluation steps that you want to update for this metric.
        evaluationParams:
          description: It is an array of the params that will be used to evaluate your test cases.
          oneOf:
            - type: array
              title: llmTestCaseParams
              items:
                type: string
                enum:
                  [
                    input,
                    actualOutput,
                    expectedOutput,
                    context,
                    toolsCalled,
                    expectedTools,
                    retrievalContext,
                  ]
            - type: array
              title: conversationalTestCaseParams
              items:
                type: string
                enum:
                  [
                    turns,
                    scenario,
                    expectedOutcome,
                    userDescription,
                    context,
                    chatbotRole,
                  ]
        rubric:
          type: array
          description: A list of score ranges (010 inclusive). Must be in order and non-overlapping. Click here to [learn more](https://deepeval.com/docs/metrics-llm-evals#rubric)
          items:
            $ref: "#/components/schemas/Rubric"

    UpdateMetricResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metric was updated successfully."
        deprecated:
          type: boolean
          description: "This is true if this metrics endpoint is deprecated."
      required:
        - success
        - deprecated

    CreateMetricCollection:
      type: object
      description: Request schema to create or update a metric collection
      properties:
        name:
          type: string
          description: This is the unique name of the metric collection you wish to create.
        multiTurn:
          type: boolean
          description: This is true if your metric collection is multi-turn, which contains only multi-turn metrics. Defaulted to `false`.
        metricSettings:
          type: array
          description: This is the list of metric settings for the collection.
          items:
            $ref: "#/components/schemas/MetricSetting"
      required:
        - name

    UpdateMetricCollection:
      type: object
      description: Request schema to create or update a metric collection
      properties:
        name:
          type: string
          description: The name of the metric collection, which must be unique within your project.
        multiTurn:
          type: boolean
          description: This is true if your metric collection is multi-turn, which contains only multi-turn metrics. Defaulted to `false`.
        metricSettings:
          type: array
          description: This is the list of metric settings for the collection.
          items:
            $ref: "#/components/schemas/MetricSetting"
      required:

    MetricSetting:
      type: object
      properties:
        metric:
          type: object
          description: This is a metric object, which contains the metric name.
          properties:
            name:
              type: string
              description: This is the name of the metric.
          required:
            - name
        activated:
          type: boolean
          default: true
          description: "This determines if the metric is activated. Only activated metrics are used for evaluations. Non-activated metrics are skipped."
        threshold:
          type: number
          minimum: 0
          maximum: 1
          default: 0.5
          description: "This determines the threshold for the metric which determines if the metric passes or fails depending on if the metric score is equal or greater than the threshold."
        includeReason:
          type: boolean
          default: true
          description: "This determines if the reason for the metric score should be generated during evaluations."
        strictMode:
          type: boolean
          default: false
          description: "This determines if the metric is in strict mode. Metrics in strict mode output a binary score of 0 or 1, indicating pass or fail, as opposed to a continuous score from 0 to 1."
        sampleRate:
          type: number
          minimum: 0
          maximum: 1
          default: 1
          description: "This determines the probability of the metric being ran for evaluation."
    required:
      - metric

    CreateMetricCollectionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metric collection was created successfully."
        data:
          type: object
          description: "This maps to the id of the metric collection."
          properties:
            id:
              description: "This is the id of the metric collection."
              type: string
          required:
            - id
        deprecated:
          type: boolean
          description: "This is true if this metric collection endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    UpdateMetricCollectionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the metric collection was updated successfully."
        data:
          type: object
          description: "This maps to the id of the metric collection."
          properties:
            id:
              description: "This is the id of the metric collection."
              type: string
          required:
            - id
        deprecated:
          type: boolean
          description: "This is true if this metric collection endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    GetMetricCollectionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the list of metric collections was retrieved successfully."
        data:
          type: object
          description: "This maps to a list of metric collections, which can be used to [run evals](/api-reference/evaluation/evaluate-llm) remotely."
          properties:
            metricCollections:
              type: array
              description: "This is a list of metric collection objects."
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: "This is the id of the metric collection."
                  name:
                    type: string
                    description: "This is the name of the metric collection, which should be supplied to the [evals API](/api-reference/evaluation/evaluate-llm) to run evaluations remotely."
                  multiTurn:
                    type: boolean
                    description: "This is true if the metric collection is a multi-turn collection, which only contains multi-turn metrics for multi-turn evaluations."
                  metricSettings:
                    type: array
                    description: "This is a list of settings for each metric in the collection, which can be configured on [Confident AI's](https://confidentai.com) metric collection page."
                    items:
                      type: object
                      properties:
                        metric:
                          type: object
                          description: "This is a metric object, which contains the metric name."
                          properties:
                            name:
                              type: string
                              description: "This is the name of the metric."
                        activated:
                          type: boolean
                          description: "This is true if the metric is activated. Only activated metrics are used for evaluations. Non-activated metrics are skipped."
                        threshold:
                          type: number
                          minimum: 0
                          maximum: 1
                          description: "This is the threshold for the metric, which determines if the metric passes or fails depending on if the metric score is above or below the threshold."
                        includeReason:
                          type: boolean
                          description: "This is true if a metric's `include_reason` setting is toggled on the Confident platform. If true, the reason for the metric score will be generated during evaluations."
                        strictMode:
                          type: boolean
                          description: "This is true if the metric is in strict mode. Metrics in strict mode output a binary score of 0 or 1, indicating pass or fail, as opposed to a continuous score from 0 to 1."
                        sampleRate:
                          type: number
                          minimum: 0
                          maximum: 1
                          description: "This is the probability of the metric being ran for evaluation."
                      required:
                        - metric
                        - activated
                        - threshold
                        - includeReason
                        - strictMode
                        - sampleRate
                required:
                  - id
                  - name
                  - multiTurn
                  - metricSettings
          required:
            - metricCollections
      required:
        - success
        - data

    RetrievedGolden:
      type: object
      properties:
        input:
          type: string
          description: "This is the input to your LLM application."
        actualOutput:
          type: string
          description: "This is the actual output of your LLM application."
        expectedOutput:
          type: string
          description: "This is the expected output of your LLM application, which is the ideal actual output."
        retrievalContext:
          type: array
          items:
            type: string
          description: "This is the retrieval context of your LLM application."
        context:
          type: array
          items:
            type: string
          description: "This is the ideal retrieval context of your LLM application."
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the tools called by your LLM application."
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the expected tools to be called by the LLM application."
        additionalMetadata:
          type: object
          additionalProperties: true
          description: "This is any additional metadata you wish to associate with the golden."
        comments:
          type: string
          description: "This is any comments you wish to associate with the golden."
        sourceFile:
          type: string
          description: "This is the source file from which the golden was retrieved."
        customColumnKeyValues:
          type: object
          additionalProperties: true
          description: "This is the custom column key values of the LLM application."
      required:
        - input

    RetrievedConversationalGolden:
      type: object
      properties:
        scenario:
          type: string
          description: "This is a description of the conversation context."
        userDescription:
          type: string
          description: "This is the description of the user in the conversation."
        expectedOutcome:
          type: string
          description: "This describes the expected outcome, or ideal conversation flow, of the conversation."
        turns:
          type: array
          items:
            $ref: "#/components/schemas/Turn"
          description: "This is the list of turns in the conversation."
        context:
          type: array
          items:
            type: string
          description: "This is the context of the conversation."
        additionalMetadata:
          type: object
          additionalProperties: true
          description: "This is any additional metadata you wish to associate with the golden."
        comments:
          type: string
          description: "This is any comments you wish to associate with the golden."
        sourceFile:
          type: string
          description: "This is the source file from which the golden was retrieved."
        customColumnKeyValues:
          type: object
          additionalProperties: true
          description: "This is the custom column key values of the LLM application."
      required:
        - scenario

    Golden:
      type: object
      properties:
        input:
          type: string
          description: "This is the input to your LLM application."
        actualOutput:
          type: string
          description: "This is the actual output of your LLM application."
        expectedOutput:
          type: string
          description: "This is the expected output of your LLM application, which is the ideal actual output."
        retrievalContext:
          type: array
          items:
            type: string
          description: "This is the retrieval context of your LLM application."
        context:
          type: array
          items:
            type: string
          description: "This is the ideal retrieval context of your LLM application."
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the tools called by your LLM application."
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the expected tools to be called by the LLM application."
        additionalMetadata:
          type: object
          additionalProperties: true
          description: "This is any additional metadata you wish to associate with the golden."
        comments:
          type: string
          description: "This is any comments you wish to associate with the golden."
        sourceFile:
          type: string
          description: "This is the source file from which the golden was retrieved."
        finalized:
          type: boolean
          description: "This determines whether the golden has been finalized."
        customColumnKeyValues:
          type: object
          additionalProperties: true
          description: "Key-value pairs representing custom table column data for this golden. Keys correspond to the custom column keys defined in the dataset."
      required:
        - input

    ConversationalGolden:
      type: object
      properties:
        scenario:
          type: string
          description: "This is a description of the conversation context."
        userDescription:
          type: string
          description: "This is the description of the user in the conversation."
        expectedOutcome:
          type: string
          description: "This describes the expected outcome, or ideal conversation flow, of the conversation."
        turns:
          type: array
          items:
            $ref: "#/components/schemas/Turn"
          description: "This is the list of turns in the conversation."
        context:
          type: array
          items:
            type: string
          description: "This is the context of the conversation."
        additionalMetadata:
          type: object
          additionalProperties: true
          description: "This is any additional metadata you wish to associate with the golden."
        comments:
          type: string
          description: "This is any comments you wish to associate with the golden."
        sourceFile:
          type: string
          description: "This is the source file from which the golden was retrieved."
        finalized:
          type: boolean
          description: "This determines whether the golden has been finalized."
        customColumnKeyValues:
          type: object
          additionalProperties: true
          description: "Key-value pairs representing custom table column data for this golden. Keys correspond to the custom column keys defined in the dataset."
      required:
        - scenario

    SimulationConversationalGolden:
      type: object
      properties:
        scenario:
          type: string
          description: "This is a description of the conversation context."
        userDescription:
          type: string
          description: "This is the description of the user in the conversation."
        expectedOutcome:
          type: string
          description: "This describes the expected outcome, or ideal conversation flow, of the conversation."
        turns:
          type: array
          items:
            $ref: "#/components/schemas/Turn"
          description: "This is the list of turns in the conversation."
        context:
          type: array
          items:
            type: string
          description: "This is the context of the conversation."
        additionalMetadata:
          type: object
          additionalProperties: true
          description: "This is any additional metadata you wish to associate with the golden."
        comments:
          type: string
          description: "This is any comments you wish to associate with the golden."
        name:
          type: string
          description: "This is the name of the golden."
        customColumnKeyValues:
          type: object
          additionalProperties: true
          description: "Key-value pairs representing custom table column data for this golden. Keys correspond to the custom column keys defined in the dataset."
      required:
        - scenario

    Turn:
      type: object
      properties:
        role:
          type: string
          enum: ["user", "assistant"]
          description: "The role of the turn, either user or assistant."
        content:
          type: string
          description: "The message content of the turn."
        userId:
          type: string
          description: "The user ID associated with the turn."
        retrievalContext:
          type: array
          items:
            type: string
          description: "The contexts retrieved to generate the LLM response for this turn."
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "The tools called to generate the LLM response for this turn."
      required:
        - role
        - content

    ToolCallData:
      type: object
      properties:
        name:
          type: string
          description: "This is the name of the tool."
        description:
          type: string
          description: "This is the description of the tool."
        inputParameters:
          type: object
          additionalProperties: true
          description: "This is the input parameters that are passed to the tool."
        output:
          type: string
          description: "This is the output of the tool."
        reasoning:
          type: string
          description: "This is the reasoning your LLM provided for the tool call."
      required:
        - name
        - description

    GetDatasetResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the dataset was successfully pulled."
        data:
          oneOf:
            - type: object
              title: Single-Turn
              description: Dataset with single-turn goldens
              properties:
                id:
                  type: string
                  description: A unique identifier for a dataset
                goldens:
                  type: array
                  items:
                    $ref: "#/components/schemas/Golden"
              required:
                - id
                - goldens
            - type: object
              title: Multi-Turn
              description: Dataset with multi-turn goldens
              properties:
                id:
                  type: string
                  description: A unique identifier for a dataset
                conversationalGoldens:
                  type: array
                  items:
                    $ref: "#/components/schemas/ConversationalGolden"
              required:
                - id
                - conversationalGoldens
      required:
        - success
        - data

    PushDatasetRequestData:
      type: object
      properties:
        finalized:
          type: boolean
          description: "Determines whether goldens are finalized when pushed to the dataset."
        goldens:
          type: array
          items:
            $ref: "#/components/schemas/Golden"
          description: "This is a list of single-turn goldens to push. If you are pushing a multi-turn dataset, this should be `null`."
        conversationalGoldens:
          type: array
          items:
            $ref: "#/components/schemas/ConversationalGolden"
          description: "This is a list of conversational goldens to push. If you are pushing a single-turn dataset, this should be `null`."
      required:
        - finalized

    DeleteDatasetResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the dataset was successfully deleted."
        data:
          type: object
          properties:
            id:
              type: string
              description: "This is the ID of the deleted dataset."
      required:
        - success
        - data

    CreateOrUpdateGoldenRequestData:
      type: object
      properties:
        link:
          type: string
          description: "This is the URL to the dataset you updated."
      required:
        - link

    LLMTestCase:
      type: object
      properties:
        input:
          type: string
          description: "This is the input to your LLM application."
        actualOutput:
          type: string
          description: "This is the actual output of your LLM application."
        name:
          type: string
          description: "This is the name of your test case, it allows you to search and match test cases across different test runs."
        expectedOutput:
          type: string
          description: "This is the expected output of your LLM application, which is the ideal actual output."
        retrievalContext:
          type: array
          items:
            type: string
          description: "This is the retrieval context of your LLM application."
        context:
          type: array
          items:
            type: string
          description: "This is the ideal retrieval context of your LLM application."
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the tools called by your LLM application."
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: "This is the expected tools to be called by the LLM application."
      required:
        - input
        - actualOutput

    ConversationalTestCase:
      type: object
      properties:
        turns:
          type: array
          items:
            $ref: "#/components/schemas/Turn"
          description: "This is the list of turns in the conversation."
        scenario:
          type: string
          description: "This is a description of the conversation context."
        name:
          type: string
          description: "This is the name of your test case, it allows you to search and match test cases across different test runs."
        expectedOutcome:
          type: string
          description: "This describes the expected outcome, or ideal conversation flow, of the conversation."
        userDescription:
          type: string
          description: "This is the description of the user in the conversation."
        chatbotRole:
          type: string
          description: "This is the role of the chatbot in the conversation."
      required:
        - turns

    EvaluateRequest:
      type: object
      properties:
        metricCollection:
          type: string
          description: "The name of the metric collection you wish to use for evaluation."
        llmTestCases:
          type: array
          description: "This is a list of single-turn test cases to evaluate. If you are evaluating multi-turn test cases, this should be `null`."
          items:
            $ref: "#/components/schemas/LLMTestCase"
        conversationalTestCases:
          type: array
          description: "This is a list of multi-turn test cases to evaluate. If you are evaluating single-turn test cases, this should be `null`."
          items:
            $ref: "#/components/schemas/ConversationalTestCase"
        hyperparameters:
          type: object
          additionalProperties: true
          description: "This is any hyperparameters like model or prompt you wish to associate with the test run."
        identifier:
          type: string
          description: "A unique identifier for the test run."
      required:
        - metricCollection
        - testCases

    EvaluateResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the test cases were successfully evaluated."
        data:
          type: object
          properties:
            id:
              type: string
              description: "This is the unique ID for the test run. This ID is generated by Confident AI and is not to be confused with the identifier provided by the user."
        deprecated:
          type: boolean
          description: "This is true if this endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    SimulateRequest:
      type: object
      properties:
        golden:
          $ref: "#/components/schemas/ConversationalGolden"
          description: A Conversational Golden that is used to simulate your conversations
      required:
        - golden

    SimulateResponse:
      type: object
      properties:
        success:
          type: boolean
          description: "This is true if the next turn in the conversation was successfully simulated."
        data:
          type: object
          properties:
            simulationId:
              type: string
              description: "This is the unique ID for the simulation."
            completed:
              type: boolean
              description: "This is true if the conversation is complete, which means the expected outcome has been reached."
            userResponse:
              type: string
              description: "This is the simulated user response of the last turn in the conversation."
            turns:
              type: array
              items:
                $ref: "#/components/schemas/Turn"
              description: "This is the list of all the turns in the conversation."
        deprecated:
          type: boolean
          description: "This is true if this endpoint is deprecated."
      required:
        - success
        - data
        - deprecated

    BaseSpan:
      type: object
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the span.
        name:
          type: string
          description: This is the name of the span.
        input:
          type: string
          description: This is the input to the span.
        output:
          type: string
          description: This is the output of the span.
        error:
          type: string
          description: This is the error message, if an error occurred inside the span.
        status:
          type: string
          enum: [SUCCESS, ERRORED]
          description: This represents the error status of the span.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        parentUuid:
          type: string
          format: uuid
          description: This is the unique identifier of the span's parent span.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the span.
        metricCollection:
          type: string
          description: This is the metric collection to be used for evaluating the span.
        type:
          type: string
          description: This is a string that represents the type of span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
      required:
        - uuid
        - name
        - startTime
        - endTime

    LlmSpan:
      type: object
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the span.
        name:
          type: string
          description: This is the name of the span.
        input:
          type: string
          description: This is the input to the span.
        output:
          type: string
          description: This is the output of the span.
        error:
          type: string
          description: This is the error message, if an error occurred inside the span.
        status:
          type: string
          enum: [SUCCESS, ERRORED]
          description: This represents the error status of the span.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        parentUuid:
          type: string
          format: uuid
          description: This is the unique identifier of the span's parent span.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the span.
        metricCollection:
          type: string
          description: This is the metric collection to be used for evaluating the span.
        type:
          type: string
          description: This is a string that represents the type of span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
        model:
          type: string
          description: This is the LLM model used in the span.
        promptAlias:
          type: string
          description: This is the alias of your prompt which is stored on Confident AI.
        promptCommitHash:
          type: string
          description: This is the hash of the current prompt being logged in the llm span.
        promptLabel:
          type: string
          description: This is the label assigned to a specific version of prompt on the Confident AI platform.
        promptVersion:
          type: string
          description: This is the version assigned to your prompt on Confident AI.
        costPerInputToken:
          type: number
          format: float
          description: This is the cost per input token of the LLM model.
        costPerOutputToken:
          type: number
          format: float
          description: This is the cost per output token of the LLM model.
        inputTokenCount:
          type: integer
          description: This is the number of input tokens passed to the LLM model.
        outputTokenCount:
          type: integer
          description: This is the number of output tokens generated by the LLM model.
      required:
        - model

    RetrieverSpan:
      type: object
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the span.
        name:
          type: string
          description: This is the name of the span.
        input:
          type: string
          description: This is the input to the span.
        output:
          type: string
          description: This is the output of the span.
        error:
          type: string
          description: This is the error message, if an error occurred inside the span.
        status:
          type: string
          enum: [SUCCESS, ERRORED]
          description: This represents the error status of the span.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        parentUuid:
          type: string
          format: uuid
          description: This is the unique identifier of the span's parent span.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the span.
        metricCollection:
          type: string
          description: This is the metric collection to be used for evaluating the span.
        type:
          type: string
          description: This is a string that represents the type of span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
        embedder:
          type: string
          description: This is the embedder model used in the span.
        topK:
          type: integer
          description: This is the top K chunks retrieved from your knowledge base.
        chunkSize:
          type: integer
          description: This is the chunk size of each retrieved context.
      required:
        - embedder

    ToolSpan:
      type: object
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the span.
        name:
          type: string
          description: This is the name of the span.
        input:
          type: string
          description: This is the input to the span.
        output:
          type: string
          description: This is the output of the span.
        error:
          type: string
          description: This is the error message, if an error occurred inside the span.
        status:
          type: string
          enum: [SUCCESS, ERRORED]
          description: This represents the error status of the span.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        parentUuid:
          type: string
          format: uuid
          description: This is the unique identifier of the span's parent span.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the span.
        metricCollection:
          type: string
          description: This is the metric collection to be used for evaluating the span.
        type:
          type: string
          description: This is a string that represents the type of span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
        description:
          type: string
          description: This is the description of the tool used in the span.

    AgentSpan:
      type: object
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the span.
        name:
          type: string
          description: This is the name of the span.
        input:
          type: string
          description: This is the input to the span.
        output:
          type: string
          description: This is the output of the span.
        error:
          type: string
          description: This is the error message, if an error occurred inside the span.
        status:
          type: string
          enum: [SUCCESS, ERRORED]
          description: This represents the error status of the span.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        parentUuid:
          type: string
          format: uuid
          description: This is the unique identifier of the span's parent span.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the span.
        metricCollection:
          type: string
          description: This is the metric collection to be used for evaluating the span.
        type:
          type: string
          description: This is a string that represents the type of span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
        availableTools:
          type: array
          description: This is the list of names of available tools to be used in the span.
          items:
            type: string
        agentHandoffs:
          type: array
          description: This is the list of potential agent handoffs in the span.
          items:
            type: string

    Trace:
      type: object
      required:
        - uuid
        - startTime
        - endTime
      properties:
        uuid:
          type: string
          description: This is the unique identifier of the trace.
        name:
          type: string
          description: This is the name of the trace.
        input:
          type: string
          description: This is the input to the trace.
        output:
          type: string
          description: This is the output of the trace.
        startTime:
          type: string
          format: date-time
          description: This is the time the trace started.
        endTime:
          type: string
          format: date-time
          description: This is the time the trace ended.
        environment:
          type: string
          enum: [production, development, staging, testing]
          description: This is the environment where your trace was posted, which helps with separating and debugging traces from different environments on the Confident AI platform.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the trace.
        tags:
          type: array
          items:
            type: string
          description: This is any tags associated with the trace, which helps with grouping traces and filtering them on the Confident AI platform.
        baseSpans:
          type: array
          description: This is the list of base spans associated with the trace.
          items:
            $ref: "#/components/schemas/BaseSpan"
        llmSpans:
          type: array
          description: This is the list of LLM spans associated with the trace.
          items:
            $ref: "#/components/schemas/LlmSpan"
        retrieverSpans:
          type: array
          description: This is the list of retriever spans associated with the trace.
          items:
            $ref: "#/components/schemas/RetrieverSpan"
        toolSpans:
          type: array
          description: This is the list of tool spans associated with the trace.
          items:
            $ref: "#/components/schemas/ToolSpan"
        agentSpans:
          type: array
          description: This is the list of agent spans associated with the trace.
          items:
            $ref: "#/components/schemas/AgentSpan"
        threadId:
          type: string
          description: This is the unique identifier of the thread associated with the trace.
        userId:
          type: string
          description: This is the unique identifier for your end user for the trace.
        metricCollection:
          type: string
          description: This is the metric collection you wish to use to evaluate the trace.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your trace, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your trace, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your trace, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          description: This is the tools called by your trace, which is to be used for evaluation.
          items:
            $ref: "#/components/schemas/ToolCallData"
        expectedTools:
          type: array
          description: This is the expected tools to be called by the trace, which is to be used for evaluation.
          items:
            $ref: "#/components/schemas/ToolCallData"

    CreateTraceResponse:
      type: object
      properties:
        success:
          type: boolean
          description: A boolean indicating the success or failure of the API call
        data:
          type: object
          description: This maps to the trace id.
          properties:
            id:
              type: string
              description: This is the uuid of the trace.
        link:
          type: string
          description: This is the URL to the trace on the Confident AI platform.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated
        - link

    UpdateTrace:
      type: object
      properties:
        input:
          type: string
          description: This is the input to the trace.
        output:
          type: string
          description: This is the output of the trace.
        endTime:
          type: string
          format: date-time
          description: This is the time the trace ended.
        name:
          type: string
          description: This is the name of the trace.
        environment:
          type: string
          enum: [production, development, staging, testing]
          description: This is the environment where your trace was posted, which helps with separating and debugging traces from different environments on the Confident AI platform.
        metadata:
          type: object
          additionalProperties: true
          description: This is any additional metadata associated with the trace.
        tags:
          type: array
          description: This is any tags associated with the trace, which helps with grouping traces and filtering them on the Confident AI platform.
          items:
            type: string
        baseSpans:
          type: array
          description: This is the list of base spans associated with the trace.
          items:
            $ref: "#/components/schemas/BaseSpan"
        llmSpans:
          type: array
          description: This is the list of LLM spans associated with the trace.
          items:
            $ref: "#/components/schemas/LlmSpan"
        retrieverSpans:
          type: array
          description: This is the list of retriever spans associated with the trace.
          items:
            $ref: "#/components/schemas/RetrieverSpan"
        toolSpans:
          type: array
          description: This is the list of tool spans associated with the trace.
          items:
            $ref: "#/components/schemas/ToolSpan"
        agentSpans:
          type: array
          description: This is the list of agent spans associated with the trace.
          items:
            $ref: "#/components/schemas/AgentSpan"

    UpdateTraceResponse:
      type: object
      properties:
        success:
          type: boolean
          description: A boolean indicating the success or failure of the API call
        data:
          type: object
          properties:
            id:
              type: string
              description: This is the uuid of the trace.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    EvaluateThreadRequest:
      type: object
      properties:
        metricCollection:
          type: string
          description: This is the name of the multi-turn metric collection to evaluate the thread.
        chatbotRole:
          type: string
          description: The role or purpose of the chatbot in the thread.
      required:
        - metricCollection

    EvaluateThreadResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the thread was successfully evaluated.
        data:
          type: object
          properties:
            id:
              type: string
              description: This is the id of the thread generated by Confident AI, not to be confused with the thread id you supplied.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    EvaluateTraceRequest:
      type: object
      properties:
        metricCollection:
          type: string
          description: The name of the single-turn metric collection to evaluate the trace.
      required:
        - metricCollection

    EvaluateTraceResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the trace was successfully evaluated.
        data:
          type: object
          properties:
            id:
              type: string
              description: This is the id of the trace, not to be confused with the UUID of the trace.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    EvaluateSpanRequest:
      type: object
      properties:
        metricCollection:
          type: string
          description: The name of the metric collection to use
      required:
        - metricCollection

    EvaluateSpanResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the span was successfully evaluated.
        data:
          type: object
          properties:
            id:
              type: string
              description: This is the id of the span, not to be confused with the UUID of the trace.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    CreatePromptRequest:
      type: object
      properties:
        alias:
          type: string
          description: The unique alias of the prompt.
        text:
          type: string
          description: The text content of the prompt. Supply this only if you are creating a text-based prompt.
        messages:
          type: array
          items:
            $ref: "#/components/schemas/PromptMessage"
          description: The list of messages that make up the prompt. Supply this only if you are creating a list-based prompt.
        interpolationType:
          type: string
          enum: [MUSTACHE, MUSTACHE_WITH_SPACE, FSTRING, DOLLAR_BRACKETS]
          default: FSTRING
          description: The type of interpolation format used in the prompt to insert dynamic variables.
        modelSettings:
          $ref: "#/components/schemas/ModelSettings"
          description: This is the model settings for the prompt.
        outputType:
          type: string
          enum: [TEXT, JSON, SCHEMA]
          default: TEXT
          description: The type of output expected from the prompt.
        outputSchema:
          $ref: "#/components/schemas/OutputSchema"
          description: This is the output schema definition when outputType is SCHEMA.
        tools:
          type: array
          items:
            $ref: "#/components/schemas/Tool"
      required:
        - alias

    CreatePromptVersionRequest:
      type: object
      properties:
        hash:
          type: string
          description: The hash of the commit you wanna release a new version of. Only commits above the last versioned commit can be released as new versions. If ommited, the most recent commit will be versioned.

    CreatePromptVersionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true prompt version was successfully created
        data:
          type: object
          properties:
            version:
              type: string
              description: The version id generated by Confident AI of the new version you just released, it is always incremental.
            hash:
              type: string
              description: The hash code of the commit that was just versioned. This is the same hash you pass in request or the hash of the most recent commit on the Confident AI platform.
          required:
            - version
            - hash
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    ModelSettings:
      type: object
      additionalProperties: false
      properties:
        provider:
          $ref: "#/components/schemas/EvaluationModelProvider"
          description: This is the model provider for evaluation.
        name:
          type: string
          description: This is the name of the model.
        temperature:
          type: number
          format: float
          description: This controls randomness in the model's output. Higher values make output more random.
        maxTokens:
          type: integer
          description: This is the maximum number of tokens to generate.
        topP:
          type: number
          format: float
          description: This controls diversity via nucleus sampling. Lower values focus on more likely tokens.
        frequencyPenalty:
          type: number
          format: float
          description: This is the penalty for tokens based on their frequency in the text so far.
        presencePenalty:
          type: number
          format: float
          description: This is the penalty for tokens based on whether they appear in the text so far.
        stopSequence:
          type: array
          items:
            type: string
          description: This is the sequences where the model will stop generating further tokens.
        reasoningEffort:
          type: string
          enum: [MINIMAL, LOW, MEDIUM, HIGH]
          description: This is the level of reasoning effort for the model.
        verbosity:
          type: string
          enum: [LOW, MEDIUM, HIGH]
          description: This is the verbosity level for model output.

    OutputSchema:
      type: object
      properties:
        name:
          type: string
          description: This is the name of the output schema.
        fields:
          type: array
          items:
            $ref: "#/components/schemas/OutputSchemaField"
          description: This is the array of fields that define the output schema structure.
      required:
        - fields
        - name

    OutputSchemaField:
      type: object
      properties:
        id:
          type: string
          description: This is the unique identifier for the schema field.
        name:
          type: string
          description: This is the name of the schema field.
        type:
          type: string
          enum: [OBJECT, STRING, FLOAT, INTEGER, BOOLEAN, NULL]
          description: This is the data type for schema fields.
        required:
          type: boolean
          default: false
          description: This indicates whether the field is required in the output.
        parentId:
          type: string
          description: This is the ID of the parent field for nested structures.
      required:
        - id
        - type
        - name

    Tool:
      type: object
      properties:
        id:
          type: string
          description: This is the unique identifier for the schema field.
        name:
          type: string
          description: This is the name of the tool
        description:
          type: string
          description: This is the description of the tool
        mode:
          type: string
          enum: [STRICT, ADDITIONAL, NO_ADDITIONAL]
          description: This is the mode for your tool input fields
        structuredSchema:
          $ref: "#/components/schemas/OutputSchema"
          description: This is the schema for your tool input
      required:
        - name
        - description
        - mode

    # UpdatePromptRequest:
    #   type: object
    #   properties:
    #     text:
    #       type: string
    #       description: This is the text content of the prompt. Supply this only if you are updating a text-based prompt.
    #     messages:
    #       type: array
    #       items:
    #         $ref: "#/components/schemas/PromptMessage"
    #       description: This is the list of messages that make up the prompt. Supply this only if you are updating a list-based prompt.
    #     interpolationType:
    #       type: string
    #       enum: [MUSTACHE, MUSTACHE_WITH_SPACE, FSTRING, DOLLAR_BRACKETS]
    #       description: This is the type of interpolation format used in the prompt to insert dynamic variables.
    #     modelSettings:
    #       $ref: "#/components/schemas/ModelSettings"
    #       description: This is the model settings for the prompt.
    #     outputType:
    #       type: string
    #       enum: [TEXT, JSON, SCHEMA]
    #       description: This is the type of output expected from the prompt.
    #     outputSchema:
    #       $ref: "#/components/schemas/OutputSchema"
    #       description: This is the output schema definition when outputType is SCHEMA.
    #     tools:
    #       type: array
    #       items:
    #         $ref: "#/components/schemas/Tool"
    #       description: These are the list of tools your agent has access to.

    # UpdatePromptResponse:
    #   type: object
    #   properties:
    #     success:
    #       type: boolean
    #       description: This is true if the prompt was successfully updated.
    #     data:
    #       type: object
    #       properties:
    #         id:
    #           type: string
    #           description: This is the id of the updated prompt version, not to be confused with the alias you supplied or version number.
    #         message:
    #           type: string
    #           description: A message that acknowledges that the prompt update was successful
    #       required:
    #         - id
    #         - message
    #     deprecated:
    #       type: boolean
    #       description: This is true if this endpoint is deprecated.
    #   required:
    #     - success
    #     - data
    #     - deprecated

    EvaluationModelProvider:
      type: string
      enum: [OPEN_AI, ANTHROPIC]
      description: This is the provider of the evaluation model.

    PromptMessage:
      type: object
      properties:
        role:
          type: string
          description: This is the role of the message, which can be user, assistant, system, or developer.
        content:
          type: string
          description: This is the text content of the message.
      required:
        - role
        - content

    GetPromptResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the prompt was successfully retrieved.
        data:
          type: object
          properties:
            id:
              description: This is the id of the prompt version generated by Confident AI, not to be confused with the alias you supplied or version number.
              type: string
            version:
              type: string
              description: The version number of the prompt.
            hash:
              type: string
              description: This is the commit hash of the prompt pulled
            label:
              type: string
              description: The user-defined label for a specific version of the prompt.
            text:
              description: This is the text content of the prompt, which is null if the prompt is a list prompt.
              type: string
            messages:
              description: This is the list of messages associated with the prompt, which is null if the prompt is a text prompt.
              type: array
              items:
                $ref: "#/components/schemas/PromptMessage"
            type:
              description: This is the type of the prompt, which can be either simple text or a list of messages.
              type: string
              enum: [TEXT, LIST]
            interpolationType:
              type: string
              enum: [MUSTACHE, MUSTACHE_WITH_SPACE, FSTRING, DOLLAR_BRACKETS]
              description: The type of interpolation format used in the prompt to insert dynamic variables.
            modelSettings:
              $ref: "#/components/schemas/ModelSettings"
              description: This is the model settings for the prompt.
            outputType:
              type: string
              enum: [TEXT, JSON, SCHEMA]
              description: The type of output expected from the prompt.
            outputSchema:
              $ref: "#/components/schemas/OutputSchema"
              description: This is the output schema definition when outputType is SCHEMA.
            tools:
              type: array
              items:
                $ref: "#/components/schemas/Tool"
          required:
            - id
            - type
            - interpolationType
            - hash
            - outputType
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    CreatePromptResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the prompt was successfully created.
        data:
          type: object
          description: This maps to the prompt version id.
          properties:
            promptId:
              type: string
              description: This is the id of the prompt generated by Confident AI, not to be confused with the alias you supplied or version number.
            hash:
              type: string
              description: This is the hash of the commit created by Confident AI for pushing this prompt, not to be confused with version number.
          required:
            - promptId
            - hash
        link:
          type: string
          description: This is the URL to redirect to after the prompt is created.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - link
        - deprecated

    PromptVersionsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the prompt versions were successfully retrieved.
        data:
          type: object
          additionalProperties: false
          properties:
            textVersions:
              description: This is the list of versions associated with the text prompt, which is null if the prompt is a messages prompt.
              type: array
              items:
                $ref: "#/components/schemas/PromptVersion"
            messagesVersions:
              description: This is the list of versions associated with the messages prompt, which is null if the prompt is a text prompt.
              type: array
              items:
                $ref: "#/components/schemas/PromptVersion"
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    PromptCommit:
      type: object
      properties:
        id:
          type: string
          description: The id of a commit generated by Confident AI, not to be confused with prompt id or commit hash.
        hash:
          type: string
          description: The hash of a commit generated by Confident AI.
        message:
          type: string
          description: The message associated with a commit, not to be confused with a prompt's message.
      required:
        - id
        - hash
        - message

    PromptCommitsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the prompt versions were successfully retrieved.
        data:
          type: object
          additionalProperties: false
          properties:
            commits:
              type: array
              items:
                $ref: "#/components/schemas/PromptCommit"
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    PromptVersion:
      type: object
      additionalProperties: false
      properties:
        id:
          type: string
          description: This is the id of the prompt version generated by Confident AI, not to be confused with the version.
        version:
          type: string
          description: This is the version number of a prompt version.
      required:
        - id
        - version

    Annotation:
      type: object
      properties:
        id:
          type: string
          description: This is the id of the annotation generated by Confident AI, not to be confused with the alias you supplied or version number.
        rating:
          type: integer
          description: This is the annotated rating score.
        type:
          type: enum
          enum: [THUMBS_RATING, FIVE_STAR_RATING]
          description: This is the type of annotation, which can be either thumbs rating or five star rating.
        name:
          type: string
          description: The name of the annotation.
        expectedOutcome:
          type: string
          description: This is the annotated expected outcome, for conversation annotations.
        expectedOutput:
          type: string
          description: This is the annotated expected output, for span and trace annotations.
        explanation:
          type: string
          description: This is the explanation for the annotation.
        flagged:
          type: boolean
          description: This determines if the annotation is flagged.
        createdAt:
          type: string
          format: date-time
          description: The timestamp when the annotation was created.
        traceUuid:
          type: string
          description: The UUID of the trace associated with this annotation, if applicable.
        spanUuid:
          type: string
          description: The UUID of the span associated with this annotation, if applicable.
        threadId:
          type: string
          description: The ID of the thread associated with this annotation, if applicable.
        testCaseId:
          type: string
          description: The ID of the test case associated with this annotation, if applicable.
        threadSuppliedId:
          type: string
          description: The supplied ID of the thread associated with this annotation, if applicable.
        userEmail:
          type: string
          description: The email of the user who created this annotation.
      required:
        - id
        - rating
        - type
        - flagged

    CreateAnnotation:
      type: object
      description: Request schema to create an annotation for a trace, span, or thread.
      properties:
        traceUuid:
          type: string
          description: This is the trace UUID to annotate. Exactly one of traceUuid, spanUuid, or threadId must be provided.
        spanUuid:
          type: string
          description: This is the span UUID to annotate. Exactly one of traceUuid, spanUuid, or threadId must be provided.
        threadId:
          type: string
          description: This is the thread ID to annotate. Exactly one of traceUuid, spanUuid, or threadId must be provided.
        rating:
          type: number
          description: This is the annotated rating score, which must be 0 or 1 if the annotation is a thumb rating and an integer from 1 to 5 if the annotation is a five star rating.
        type:
          type: string
          enum: [THUMBS_RATING, FIVE_STAR_RATING]
          default: THUMBS_RATING
          description: This is the annotation typem which defaults to THUMBS_RATING.
        expectedOutput:
          type: string
          description: This is the expected output for trace/span annotations, which mustn't be provided when annotating a thread.
        expectedOutcome:
          type: string
          description: This is the expected outcome for thread annotations, which mustn't be provided when annotating a trace or span.
        explanation:
          type: string
          description: This is an explanation for the annotation.
        userId:
          type: string
          description: This can be any user ID that you want to associate with the annotation.
      required:
        - rating

    CreateAnnotationResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the annotation was successfully created.
        data:
          type: object
          description: This maps to the id of the created annotation.
          properties:
            id:
              type: string
              description: This is the id of the created annotation.
          required:
            - id
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    GetTraceResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the traces were successfully retrieved.
        data:
          type: object
          description: This maps to the list of traces retrieved.
          properties:
            traces:
              type: array
              description: This is the list of traces retrieved.
              items:
                $ref: "#/components/schemas/GetTrace"
            totalTraces:
              type: integer
              description: This is the total number of traces retrieved.
          required:
            - traces
            - totalTraces
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    ListThreadsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the threads were successfully retrieved.
        data:
          type: object
          description: This maps to the list of threads retrieved.
          properties:
            threads:
              type: array
              description: This is the list of threads retrieved.
              items:
                $ref: "#/components/schemas/ThreadSummary"
            totalThreads:
              type: integer
              description: This is the total number of threads retrieved.
          required:
            - threads
            - totalThreads
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    GetThreadResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the thread was successfully retrieved.
        data:
          $ref: "#/components/schemas/ThreadDetail"
          description: This maps to the thread retrieved.
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    ThreadSummary:
      type: object
      properties:
        threadId:
          type: string
          description: This is the internal ID of the thread generated by Confident AI.
        suppliedThreadId:
          type: string
          description: This is the thread ID you supplied when creating the thread.
        createdAt:
          type: string
          format: date-time
          description: This is when the thread was created.
        lastActivity:
          type: string
          format: date-time
          description: This is when the thread was last active.
        metadata:
          type: object
          additionalProperties: true
          description: This is the custom metadata attached to the thread.
        tags:
          type: array
          items:
            type: string
          description: This is the list of tags associated with the thread.
        metricCollectionName:
          type: string
          description: This is the name of the metric collection assigned to evaluate the thread.
        totalTraces:
          type: integer
          description: This is the total number of traces in this thread.
      required:
        - threadId
        - suppliedThreadId
        - createdAt
        - lastActivity
        - totalTraces

    ThreadDetail:
      type: object
      properties:
        threadId:
          type: string
          description: This is the internal ID of the thread generated by Confident AI.
        suppliedThreadId:
          type: string
          description: This is the thread ID you supplied when creating the thread.
        createdAt:
          type: string
          format: date-time
          description: This is when the thread was created.
        lastActivity:
          type: string
          format: date-time
          description: This is when the thread was last active.
        metadata:
          type: object
          additionalProperties: true
          description: This is the custom metadata attached to the thread.
        tags:
          type: array
          items:
            type: string
          description: This is the list of tags associated with the thread.
        metricCollectionName:
          type: string
          description: This is the name of the metric collection assigned to evaluate the thread.
        totalTraces:
          type: integer
          description: This is the total number of traces in this thread.
        metricsData:
          type: array
          items:
            $ref: "#/components/schemas/MetricsData"
          description: This is the evaluation metrics data for the thread.
        annotations:
          type: array
          items:
            $ref: "#/components/schemas/Annotation"
          description: This is the list of annotations associated with the thread.
        traces:
          type: array
          items:
            $ref: "#/components/schemas/GetTrace"
          description: This is the list of traces in this thread.
      required:
        - threadId
        - suppliedThreadId
        - createdAt
        - lastActivity
        - totalTraces

    GetTrace:
      type: object
      properties:
        id:
          type: string
          description: This is the id of the trace generated by Confident AI, not to be confused with the uuid of the trace.
        input:
          additionalProperties: true
          description: This is the input to the trace.
        output:
          additionalProperties: true
          description: This is the output of the trace.
        created_at:
          type: string
          format: date-time
          description: This is the time the trace was created.
        ended_at:
          type: string
          format: date-time
          description: This is the time the trace ended.
        name:
          type: string
          description: This is the name of the trace.
        uuid:
          type: string
          format: uuid
          description: This is the uuid of the trace, not to be confused with the trace id.
        environment:
          type: string
          enum: [production, development, staging, testing]
          description: This is the environment where the trace was created.
        threadId:
          type: string
          description: This is the thread id of the trace, which groups traces in the same thread into a conversation.
        testCaseId:
          type: string
          description: This is the test case id of the trace, which is only set if the trace was created in a testing environment.
        endUserId:
          type: string
          description: This is the user id you provided for this trace.
        projectId:
          type: string
          description: This is the id of the project where the trace lives.
        metricCollectionName:
          type: string
          description: This is the name of the metric collection assigned to evaluate the trace.
        retrievalContext:
          type: array
          description: This is the retrieval context associated with the trace, to be used for evaluations.
          items:
            type: string
        context:
          type: array
          description: This is the ideal retrieval context associated with the trace, to be used for evaluations.
          items:
            type: string
        expectedOutput:
          type: array
          description: This is the expected output associated with the trace, to be used for evaluations.
          items:
            $ref: "#/components/schemas/ToolCallData"
        expectedTools:
          type: array
          description: This is the list of expected tools associated with the trace, to be used for evaluations.
          items:
            $ref: "#/components/schemas/ToolCallData"
        metricsData:
          type: array
          description: This is the list of metrics data associated with the trace after running evaluations.
          items:
            $ref: "#/components/schemas/MetricsData"
        annotation:
          $ref: "#/components/schemas/Annotation"
          description: This is the text annotation for the trace.
        tags:
          type: array
          items:
            type: string
          description: This is the list of tags associated with the trace, which is useful for grouping and filtering for traces.
        metadataValues:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
                description: This is the key of the metadata key-value pair.
              value:
                type: string
                description: This is the value of the metadata key-value pair.
          description: This is the list of any metadata key-value pairs associated with the trace.
        spans:
          type: array
          items:
            $ref: "#/components/schemas/GetSpan"
          description: This is the list of spans in the trace.
      required:
        - id
        - uuid
        - created_at
        - ended_at
        - projectId
        - spans
        - metadataValues
        - tags

    MetricsData:
      type: object
      properties:
        id:
          type: string
          description: The id of the metrics data.
        score:
          type: number
          description: This is the final metric score.
        reason:
          type: string
          description: This is the reason for the metric score, which is generated by the evaluation model at evaluation time.
        success:
          type: boolean
          description: This is true if the metric score is above the threshold.
        threshold:
          type: number
          format: float
          description: This is the threshold for the metric, which determines if the metric is passing or failing depending on if the metric score is above or below the threshold.
        evaluationModel:
          type: string
          description: This is the evaluation model used to run the evaluation.
        strictMode:
          type: boolean
          description: This is true if the metric was run in strict mode, which outputs a binary score of 0 or 1.
        error:
          type: string
          description: This is the error message if the evaluation failed.
        evaluationCost:
          type: number
          format: float
          description: This is the cost of running the evaluation.
        name:
          type: string
          description: This is the name of the metric.
        verboseLogs:
          type: string
          description: This is the verbose logs of the evaluation, which breaks down the metric score calculation into individual steps.
      required:
        - id
        - threshold
        - name

    GetSpan:
      type: object
      properties:
        id:
          type: string
          description: This is the id of the span generated by Confident AI, not to be confused with the uuid of the span.
        uuid:
          type: string
          format: uuid
          description: This is the uuid of the span, not to be confused with the span id.
        name:
          type: string
          description: This is the name of the span.
        input:
          description: This is the input to the span.
        output:
          description: This is the output of the span.
        error:
          type: string
          description: This is the error string that caused the span to fail, if an error occurred.
        parentUuid:
          type: string
          description: This is the uuid of the parent span, if any.
        startTime:
          type: string
          format: date-time
          description: This is the time the span started.
        endTime:
          type: string
          format: date-time
          description: This is the time the span ended.
        traceUuid:
          type: string
          description: This is the uuid of the trace containing the span.
        agentHandoffs:
          type: array
          items: string
          description: This is the list of agent handoffs associated with an agent span.
        availableTools:
          type: array
          items: string
          description: This is the list of available tools associated with an agent span.
        chunkSize:
          type: integer
          description: This is the chunk size of each retrieved context for a retriever span.
        costPerInputToken:
          type: number
          format: float
          description: This is the cost per input token of the LLM model for an LLM span.
        costPerOutputToken:
          type: number
          format: float
          description: This is the cost per output token of the LLM model for an LLM span.
        description:
          type: string
          description: This is a description if the span is a tool span.
        embedder:
          type: string
          description: This is the embedder model used in a retriever span.
        inputTokenCost:
          type: number
          format: float
          description: This is the total cost of the input tokens passed to the LLM model in an LLM span.
        inputTokenCount:
          type: integer
          description: This is the total number of input tokens passed to the LLM model in an LLM span.
        model:
          type: string
          description: This is the LLM model used in an LLM span.
        outputTokenCost:
          type: number
          format: float
          description: This is the total cost of the output tokens generated by the LLM model in an LLM span.
        outputTokenCount:
          type: integer
          description: This is the total number of output tokens generated by the LLM model in an LLM span.
        status:
          type: string
          enum: [SUCCESS, FAILED, PENDING]
          description: This is the error status of the span.
        topK:
          type: integer
          description: This is the top K chunks retrieved from your knowledge base.
        type:
          type: string
          description: This is the type of the span.
        metricCollectionName:
          type: string
          description: This is the name of the metric collection to evaluate the span.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of your span, which is to be used for evaluation.
        context:
          type: array
          items:
            type: string
          description: This is the ideal retrieval context of your span, which is to be used for evaluation.
        expectedOutput:
          type: string
          description: This is the expected output of your span, which is the ideal actual output and to be used for evaluation.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called by your span, which is to be used for evaluation.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools to be called by the span, which is to be used for evaluation.
        metricsData:
          type: array
          items:
            $ref: "#/components/schemas/MetricsData"
          description: This is the metrics data associated with the span.
        annotation:
          $ref: "#/components/schemas/Annotation"
          description: This is the text annotation for the span.
        environment:
          type: string
          enum: [production, development, staging, testing]
          description: This is the environment where your span was posted, which helps with separating and debugging spans from different environments on the Confident AI platform.
        metadataValues:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
                description: This is the key of the metadata key-value pair.
              value:
                type: string
                description: This is the value of the metadata key-value pair.
          description: This is the list of any metadata key-value pairs associated with the span.
      required:
        - id
        - uuid
        - name
        - startTime
        - endTime
        - traceUuid
        - status
        - type

    TestRunResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the test run was successfully retrieved.
        data:
          type: object
          additionalProperties: false
          properties:
            metricsScores:
              type: array
              items:
                $ref: "#/components/schemas/MetricScores"
              description: The aggregated metric scores across all test cases.
            testCases:
              type: array
              items:
                oneOf:
                  - $ref: "#/components/schemas/TestRunTestCase"
                  - $ref: "#/components/schemas/TestRunConversationalTestCase"
              description: The test cases in this test run. Will contain either single-turn test cases or conversational test cases, but not both.
            multiTurn:
              type: boolean
              description: Whether this test run contains multi-turn test cases.
            identifier:
              type: string
              description: A unique identifier for the test run.
            status:
              type: string
              enum: ["IN_PROGRESS", "COMPLETED", "ERRORED", "CANCELLED"]
              description: The current status of the test run.
            testsPassed:
              type: number
              description: The number of test cases that passed.
            testsFailed:
              type: number
              description: The number of test cases that failed.
            totalTests:
              type: number
              description: The total number of test cases in this test run.
            runDuration:
              type: number
              format: float
              description: The total duration of the test run in seconds.
          required:
            - testCases
            - metricsScores
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    TestRunTestCase:
      type: object
      additionalProperties: false
      properties:
        id:
          type: string
          description: This is the id of the test case generated by Confident AI.
        name:
          type: string
          description: This is the name of the test case.
        input:
          type: string
          description: This is the input of the test case.
        actualOutput:
          type: string
          description: This is the actual output of the test case.
        context:
          type: array
          items:
            type: string
          description: This is the context of the test case.
        retrievalContext:
          type: array
          items:
            type: string
          description: This is the retrieval context of the test case.
        expectedOutput:
          type: string
          description: This is the expected output of the test case.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the tools called of the test case.
        expectedTools:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: This is the expected tools of the test case.
        metricsData:
          type: array
          items:
            $ref: "#/components/schemas/MetricsData"
          description: The metric evaluation results for this test case.
        comments:
          type: string
          description: Any comments associated with this test case.
        additionalMetadata:
          type: object
          additionalProperties: true
          description: Additional metadata associated with this test case.
        success:
          type: boolean
          description: Whether this test case passed all metric thresholds.
        runDuration:
          type: number
          format: float
          description: The duration of the test case evaluation in seconds.
        evaluationCost:
          type: number
          format: float
          description: The cost of evaluating this test case.
      required:
        - id
        - name
        - input

    TestRunConversationalTestCase:
      type: object
      additionalProperties: false
      properties:
        id:
          type: string
          description: This is the id of the conversational test case generated by Confident AI.
        name:
          type: string
          description: This is the name of the conversational test case.
        turns:
          type: array
          items:
            $ref: "#/components/schemas/TestRunTurn"
          description: The list of turns in the conversation.
        scenario:
          type: string
          description: A description of the conversation context.
        expectedOutcome:
          type: string
          description: The expected outcome or ideal conversation flow.
        userDescription:
          type: string
          description: A description of the user in the conversation.
        context:
          type: array
          items:
            type: string
          description: The context provided for the conversation.
        comments:
          type: string
          description: Any comments associated with this test case.
        additionalMetadata:
          type: object
          additionalProperties: true
          description: Additional metadata associated with this test case.
        metricsData:
          type: array
          items:
            $ref: "#/components/schemas/MetricsData"
          description: The metric evaluation results for this test case.
        success:
          type: boolean
          description: Whether this test case passed all metric thresholds.
        runDuration:
          type: number
          format: float
          description: The duration of the test case evaluation in seconds.
        evaluationCost:
          type: number
          format: float
          description: The cost of evaluating this test case.
      required:
        - id
        - name
        - turns

    TestRunTurn:
      type: object
      properties:
        role:
          type: string
          enum: ["user", "assistant"]
          description: The role of the turn, either user or assistant.
        content:
          type: string
          description: The message content of the turn.
        toolsCalled:
          type: array
          items:
            $ref: "#/components/schemas/ToolCallData"
          description: The tools called to generate the LLM response for this turn.
        retrievalContext:
          type: array
          items:
            type: string
          description: The contexts retrieved to generate the LLM response for this turn.
      required:
        - role
        - content

    MetricScores:
      type: object
      additionalProperties: false
      properties:
        fails:
          type: number
          description: This is the number of times this metric failed to pass the threshold.
        errors:
          type: number
          description: This is the number of times this metric errored during evaluation.
        metric:
          type: string
          description: This is the name of the metric.
        passes:
          type: number
          description: This is the number of times this metric passed the threshold.
        scores:
          type: array
          items:
            type: number
          description: This is an array of scores for the metric across test cases.
      required:
        - fails
        - errors
        - metric
        - passes
        - scores

    ListAnnotationsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
        data:
          type: object
          description: Contains the list of annotations and pagination information.
          properties:
            annotations:
              type: array
              items:
                $ref: "#/components/schemas/Annotation"
              description: List of annotations matching the filter criteria.
            total:
              type: integer
              description: Total number of annotations matching the filter criteria.
            limit:
              type: integer
              description: Maximum number of annotations returned in this response.
            offset:
              type: integer
              description: Number of annotations skipped in this response.
          required:
            - annotations
            - total
            - limit
            - offset
      required:
        - success
        - data

    GetAnnotationResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
        data:
          type: object
          description: Contains the annotation information.
          properties:
            annotation:
              $ref: "#/components/schemas/Annotation"
              description: The annotation details.
          required:
            - annotation
      required:
        - success
        - data

    UpdateAnnotation:
      type: object
      description: Request schema to update an existing annotation.
      properties:
        rating:
          type: number
          description: Updated rating score. Must be 0 or 1 for THUMBS_RATING, 1-5 for FIVE_STAR_RATING.
        type:
          type: string
          enum: [THUMBS_RATING, FIVE_STAR_RATING]
          description: Updated annotation type.
        expectedOutput:
          type: string
          description: Updated expected output for trace/span annotations.
        expectedOutcome:
          type: string
          description: Updated expected outcome for thread annotations.
        explanation:
          type: string
          description: Updated explanation for the annotation.
        flagged:
          type: boolean
          description: Updated flagged status.

    UpdateAnnotationResponse:
      type: object
      properties:
        success:
          type: boolean
          description: This is true if the annotation was successfully updated.
        data:
          type: object
          description: This maps to the id of the updated annotation.
          properties:
            id:
              type: string
              description: This is the id of the updated annotation.
          required:
            - id
        deprecated:
          type: boolean
          description: This is true if this endpoint is deprecated.
      required:
        - success
        - data
        - deprecated

    ErrorResponse:
      type: object
      properties:
        message:
          type: string
          description: Error message describing what went wrong.
      required:
        - message

    # Annotation Queue Schemas
    CreateAnnotationQueue:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
          description: The name of the annotation queue
        type:
          type: string
          enum: [TRACE, SPAN, THREAD, GOLDEN, TEST_RUN]
          description: The type of items this queue will contain

    ListAnnotationQueuesResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
        data:
          type: object
          properties:
            annotationQueues:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: The unique identifier of the annotation queue.
                  name:
                    type: string
                    description: The name of the annotation queue.
                  type:
                    type: string
                    enum: [TRACE, SPAN, THREAD, GOLDEN, TEST_RUN]
                    description: The type of items this queue contains.
                  createdAt:
                    type: string
                    format: date-time
                    description: The timestamp when the annotation queue was created.
                  updatedAt:
                    type: string
                    format: date-time
                    description: The timestamp when the annotation queue was last updated.
                  completedItems:
                    type: integer
                    description: The number of items in the queue that have been completed.
                  totalItems:
                    type: integer
                    description: The total number of items in the queue.
                  completionPercentage:
                    type: integer
                    description: The percentage of items completed in the queue (0-100).
            total:
              type: integer
              description: The total number of annotation queues matching the filter criteria.
            limit:
              type: integer
              description: The maximum number of annotation queues returned in this response.
            offset:
              type: integer
              description: The number of annotation queues skipped in this response.
          required:
            - annotationQueues
            - total
            - limit
            - offset
      required:
        - success
        - data

    CreateAnnotationQueueResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the annotation queue was successfully created.
        data:
          type: object
          description: Contains the created annotation queue information.
          properties:
            id:
              type: string
              description: The unique identifier of the newly created annotation queue.
          required:
            - id
      required:
        - success
        - data

    GetAnnotationQueueResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
        data:
          type: object
          description: Contains the annotation queue information.
          properties:
            annotationQueue:
              type: object
              description: The annotation queue details with comprehensive statistics.
              properties:
                id:
                  type: string
                  description: The unique identifier of the annotation queue.
                name:
                  type: string
                  description: The name of the annotation queue.
                type:
                  type: string
                  enum: [TRACE, SPAN, THREAD, GOLDEN, TEST_RUN]
                  description: The type of items this queue contains.
                createdAt:
                  type: string
                  format: date-time
                  description: The timestamp when the annotation queue was created.
                updatedAt:
                  type: string
                  format: date-time
                  description: The timestamp when the annotation queue was last updated.
                testRunId:
                  type: string
                  description: The ID of the test run associated with this queue, if applicable.
                completedItems:
                  type: integer
                  description: The number of items in the queue that have been completed.
                totalItems:
                  type: integer
                  description: The total number of items in the queue.
                pendingItems:
                  type: integer
                  description: The number of items in the queue that are still pending completion.
                completionPercentage:
                  type: integer
                  description: The percentage of items completed in the queue (0-100).
                assignedItems:
                  type: integer
                  description: The number of items in the queue that have been assigned to users.
                assignmentBreakdown:
                  type: object
                  description: A breakdown of assignments by user email, showing how many items are assigned to each user and how many they have completed.
                  additionalProperties:
                    type: object
                    properties:
                      assigned:
                        type: integer
                        description: The number of items assigned to this user.
                      completed:
                        type: integer
                        description: The number of items completed by this user.
          required:
            - annotationQueue
      required:
        - success
        - data

    DeleteAnnotationQueueResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the annotation queue was successfully deleted.
        data:
          type: object
          description: Contains the deleted annotation queue information.
          properties:
            id:
              type: string
              description: The unique identifier of the deleted annotation queue.
          required:
            - id
      required:
        - success
        - data

    ListQueueItemsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
        data:
          type: object
          description: Contains the list of queue items.
          properties:
            items:
              type: array
              description: List of items in the annotation queue.
              items:
                type: object
                description: A single item in the annotation queue.
                properties:
                  id:
                    type: string
                    description: The unique identifier of the queue item.
                  traceUuid:
                    type: string
                    description: The UUID of the trace associated with this queue item, if applicable.
                  spanUuid:
                    type: string
                    description: The UUID of the span associated with this queue item, if applicable.
                  threadId:
                    type: string
                    description: The ID of the thread associated with this queue item, if applicable.
                  testCaseId:
                    type: string
                    description: The ID of the test case associated with this queue item, if applicable.
                  addedAt:
                    type: string
                    format: date-time
                    description: The timestamp when this item was added to the queue.
                  completed:
                    type: boolean
                    description: Whether this queue item has been completed.
                  assignedToEmail:
                    type: string
                    description: The email address of the user assigned to this queue item, if any.
          required:
            - items
      required:
        - success
        - data

    AnnotateItem:
      type: object
      required:
        - rating
      properties:
        rating:
          type: integer
          description: Rating value (0-1 for THUMBS_RATING, 1-5 for FIVE_STAR_RATING)
        type:
          type: string
          enum: [THUMBS_RATING, FIVE_STAR_RATING]
          default: THUMBS_RATING
          description: Type of rating
        name:
          type: string
          default: Default
          description: Name of the annotation
        expectedOutcome:
          type: string
          description: Expected outcome (for threads only)
        expectedOutput:
          type: string
          description: Expected output (for traces/spans only)
        explanation:
          type: string
          description: Explanation for the rating
        flagged:
          type: boolean
          default: false
          description: Whether the item is flagged
        markAsCompleted:
          type: boolean
          default: true
          description: Whether to mark the queue item as completed

    AnnotateItemResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the annotation was successfully created for the queue item.
        data:
          type: object
          description: Contains the created annotation information.
          properties:
            id:
              type: string
              description: The unique identifier of the created annotation.
          required:
            - id
      required:
        - success
        - data

    # Metric Data Schemas
    MetricDataItem:
      type: object
      required:
        - name
        - success
        - threshold
        - strictMode
      properties:
        name:
          type: string
          description: The name of the metric (e.g., "Correctness", "Relevancy")
        score:
          type: number
          description: The metric score (optional, typically 0-1)
        success:
          type: boolean
          description: Whether the metric evaluation passed
        threshold:
          type: number
          description: The threshold used for evaluation
        strictMode:
          type: boolean
          description: Whether strict mode was enabled
        reason:
          type: string
          description: Explanation for the metric result
        evaluationModel:
          type: string
          description: The model used for evaluation (e.g., "gpt-4")
        evaluationCost:
          type: number
          description: Cost of the evaluation in USD
        verboseLogs:
          type: string
          description: Detailed logs from the evaluation
        error:
          type: string
          description: Error message if evaluation failed

    DirectMetricData:
      type: object
      required:
        - metricData
      properties:
        metricData:
          type: array
          items:
            $ref: "#/components/schemas/MetricDataItem"
          description: Array of metric data items to post
        traceUuid:
          type: string
          description: UUID of the trace to attach metrics to (mutually exclusive with other entity IDs)
        spanUuid:
          type: string
          description: UUID of the span to attach metrics to (mutually exclusive with other entity IDs)
        threadId:
          type: string
          description: ID of the thread to attach metrics to (mutually exclusive with other entity IDs)
        testCaseId:
          type: integer
          description: ID of the test case to attach metrics to (mutually exclusive with other entity IDs)
        conversationalTestCaseId:
          type: string
          description: ID of the conversational test case to attach metrics to (mutually exclusive with other entity IDs)

    DirectMetricDataResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Whether the operation was successful
        message:
          type: string
          description: Success message
        data:
          type: object
          properties:
            metricsCreated:
              type: integer
              description: Number of metric data items created

    # Projects Schemas
    Project:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the project
        name:
          type: string
          description: Name of the project
        description:
          type: string
          nullable: true
          description: Optional description of the project
        organizationId:
          type: string
          description: ID of the organization this project belongs to
        created_at:
          type: string
          format: date-time
          description: ISO 8601 timestamp of when the project was created

    GetProjectsResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
        data:
          type: object
          properties:
            projects:
              type: array
              description: List of projects in the organization
              items:
                $ref: "#/components/schemas/Project"
      required:
        - success
        - data

    CreateProject:
      type: object
      properties:
        name:
          type: string
          description: Name of the project (must be unique within the organization)
        description:
          type: string
          description: Optional description of the project
      required:
        - name

    CreateProjectResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
        data:
          type: object
          properties:
            project:
              $ref: "#/components/schemas/Project"
      required:
        - success
        - data

    UpdateProject:
      type: object
      properties:
        name:
          type: string
          description: New name for the project
        description:
          type: string
          description: New description for the project

    UpdateProjectResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful
        data:
          type: object
          properties:
            project:
              $ref: "#/components/schemas/Project"
      required:
        - success
        - data
